<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Service Locator - Guide</title>
	</properties>
	<body>
		<section name="Service Locator - Guide">
			
			<subsection name="Oversikt">
			
				<p>
					<i>Service Locator</i> er et "best practice" J2EE designmønster som benyttes for 
					å skjule og implementere funksjonalitet for å slå opp tjenester og komponenter.
					En <i>Service Locator</i> skjuler implementeringsdetaljene ifm oppslagsmekanismene 
					og innkapsler relasjoner og avhengigheter.
				</p>
			
			</subsection>
			
			<subsection name="LocalServiceLocator">
			
				<h4>Hvordan implementere en LocalServiceLocator</h4>

<pre>
package no.stelvio.business.bidrag;

    import no.stelvio.common.framework.service.LocalServiceLocator;

    public final class BusinessServiceLocator extends LocalServiceLocator {

   public BusinessServiceLocator() {
      
      // Angi hvilken konfigurasjonsfil tjenestene er definert i
      // Resten er ivaretatt av superklassen
      super("business-services.xml");
   }
}
</pre>

				<h4>Hvordan konfigurere en LocalServiceLocator</h4>
				
<pre>
&lt;beans&gt;
   &lt;bean id="HentOppgaveliste" class="no.stelvio.business.oppgaver.service.HentOppgaveListeService" /&gt;
   &lt;bean id="HentOppgave" class="no.stelvio.business.oppgaver.service.HentOppgaveService" /&gt;
   &lt;bean id="OppdaterOppgave" class="no.stelvio.business.oppgaver.service.OppdaterOppgaveService" /&gt;
   &lt;bean id="SlettOppgave" class="no.stelvio.business.oppgaver.service.SlettOppgaveService" /&gt;
&lt;/beans&gt;			
</pre>	
		
				<h4>Hvordan bruke en LocalServiceLocator</h4>
				
<pre>
...
// Opprett en instans av ønsket implementasjon
ServiceLocator services = new BusinessServiceLocator();

// Slå opp ønsket tjeneste
Service hentOppgave = null;

try {
   hentOppgave = services.lookup("HentOppgave");
} catch( ServiceNotFoundException snfe) {
   // TODO: Legg til feilhåndtering
}

// Utfør tjenesten
try {
	ServiceResponse response = hentOppgave.execute( request );
} catch( ServiceFailedException sfe) {
   // TODO: Legg til feilhåndtering
}

...
</pre>				
			
			</subsection>
			
			<subsection name="RemoteServiceLocator">
			
				<h4>Hvordan implementere en RemoteServiceLocator</h4>

<pre>
package no.stelvio.business.bidrag;

    import no.stelvio.common.framework.ejb.RemoteServiceLocator;

    public final class EnterpriseServiceLocator extends RemoteServiceLocator {

   public EnterpriseServiceLocator() {
      
      // Angi hvilken konfigurasjonsfil tjenestene er definert i
      // Resten er ivaretatt av superklassen
      super("enterprise-services.xml");
   }
}
</pre>

				<h4>Hvordan konfigurere en RemoteServiceLocator</h4>
				
<pre>
&lt;beans&gt;
   &lt;bean id="FinnPersonITPS" class="no.stelvio.common.framework.ejb.RemoteServiceDescription"&gt;
      &lt;property name="jndiName"&gt; ejb/no/nav/integration/tps/FinnPersonITPS &lt;/property&gt;
      &lt;property name="providerUrl"&gt; localhost &lt;/property&gt;
      &lt;property name="initialContextFactory"&gt; com.ibm.websphere.naming.WsnInitialContextFactory &lt;/property&gt;
      &lt;property name="urlPkgPrefixes"&gt; com.ibm.runtime:com.ibm.ws.naming:com.ibm.websphere.naming &lt;/property&gt;
      &lt;property name="securityPrincipal"&gt; aspecialuser &lt;/property&gt;
      &lt;property name="securityCredentials"&gt; hissecretpassword &lt;/property&gt;
      &lt;property name="cacheable"&gt; false &lt;/property&gt;
   &lt;/bean&gt;
&lt;/beans&gt;			
</pre>
		
				<h4>Hvordan bruke en RemoteServiceLocator</h4>
				
<pre>
...
// Opprett en instans av ønsket implementasjon
ServiceLocator services = new EnterpriseServiceLocator();

// Slå opp ønsket tjeneste
Service finnPerson = null;

try {
   finnPerson = services.lookup("FinnPersonITPS");
} catch( ServiceNotFoundException snfe) {
   // TODO: Legg til feilhåndtering
}

// Utfør tjenesten
try {
	ServiceResponse response = finnPerson.execute( request );
} catch( ServiceFailedException sfe) {
   // TODO: Legg til feilhåndtering
} catch( RemoteException re) {
   // TODO: Legg til feilhåndtering
}

...
</pre>			
			</subsection>
			<subsection name = "Endringslogg">
<source><![CDATA[
$Log$
Revision 1.3  2004/06/16 14:07:45  psa2920
la til endringslogg
]]>			
</source>
			</subsection>			
		</section>
	</body>
</document>

