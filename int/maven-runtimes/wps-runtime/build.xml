<?xml version="1.0" encoding="UTF-8"?>
<project name="wps-runtime">
	<target name="initialize">
		<loadfile property="files" srcFile="${basedir}/files.txt"/>
		<filelist id="fileList" dir="${filesBaseDirectory}" files="${files}"/>
	</target>
	
	<target name="unzipFiles" depends="validateFileList,initialize">
		<unzip dest="${unzipDirectory}" overwrite="false">
			<patternset>
				<include name="**/*.class" />
			</patternset>
			<filelist refid="fileList"/>
		</unzip>
	</target>
	
	<target name="validateFileList" depends="initialize">
		<foreach param="file" target="validateFileExists">
			<path>
				<filelist refid="fileList"/>
			</path>
		</foreach>
	</target>
	
	<target name="validateFileExists">
		<var name="fileExists" unset="true"/>
		<available property="fileExists" file="${file}"/>
		<fail unless="${fileExists}" message="${file} does not exist"/>
	</target>
</project>