<?xml version="1.0" encoding="UTF-8"?>
<connector id="Connector_ID" version="1.5" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/connector_1_5.xsd"> 
	<display-name>NAV ADLDAPAdapter</display-name>
 	<vendor-name>NAV</vendor-name>
  	<eis-type>LDAP Integration</eis-type>
  	<resourceadapter-version>7.0.0</resourceadapter-version>
	<license>
		<description>Read from AD LDAP information</description>
		<license-required>false</license-required>
	</license>

  	<resourceadapter>
	<resourceadapter-class>no.nav.j2ca.adldap.ADLDAPAdapterResourceAdapter</resourceadapter-class>
  		
		<outbound-resourceadapter>
			<connection-definition>
				<!-- ManagedConnectionfactory default configuration properties -->
				<managedconnectionfactory-class>no.nav.j2ca.adldap.ADLDAPAdapterManagedConnectionFactory</managedconnectionfactory-class>

				<config-property>
					<description>LDAP server user ID</description>
					<config-property-name>serverUserId</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value></config-property-value>
				</config-property>

				<config-property>
					<description>LDAP server user password</description>
					<config-property-name>serverUserIdPassword</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value></config-property-value>
				</config-property>

				<config-property>
					<description>LDAP server host</description>
					<config-property-name>serverHost</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value>localhost</config-property-value>
				</config-property>

				<config-property>
					<description>LDAP server host port</description>
					<config-property-name>serverPort</config-property-name>
					<config-property-type>java.lang.Integer</config-property-type>
					<config-property-value>389</config-property-value>
				</config-property>

				<config-property>
					<description>Use LDAP internal connection pooling</description>
					<config-property-name>serverConnectionPooling</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value>false</config-property-value>
				</config-property>

				<config-property>
					<description>LDAP server authentication mode</description>
					<config-property-name>serverAuthenticationMode</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value>simple</config-property-value>
				</config-property>

				<config-property>
					<description>LDAP base distinguished name (DN)</description>
					<config-property-name>serverBasedDistinguishedName</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
				<!--  <config-property-value>DC=test,DC=local</config-property-value> -->
					<config-property-value></config-property-value>
				</config-property>

				<config-property>
					<description>LDAP bind distinguished name (DN)</description>
					<config-property-name>serverBindDistinguishedName</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
				<!-- OLD 	<config-property-value>CN=srvPensjon,OU=ServiceAccounts,DC=test,DC=local</config-property-value> -->
					<config-property-value></config-property-value>
				</config-property>

				<config-property>
					<description>LDAP search base context</description>
					<config-property-name>serverSearchBaseContext</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value></config-property-value>
				</config-property>
				
				<config-property>
					<description>Directory provider [ndu | minside]</description>
					<config-property-name>directoryProvider</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value></config-property-value>
				</config-property>
				
				<config-property>
					<description>Enable SSL</description>
					<config-property-name>ssl</config-property-name>
					<config-property-type>java.lang.String</config-property-type>
					<config-property-value>false</config-property-value>
				</config-property>

				<!-- Connection factory properties -->
				<connectionfactory-interface>javax.resource.cci.ConnectionFactory</connectionfactory-interface>
				<connectionfactory-impl-class>no.nav.j2ca.adldap.ADLDAPAdapterConnectionFactory</connectionfactory-impl-class>
				<connection-interface>javax.resource.cci.Connection</connection-interface>
				<connection-impl-class>no.nav.j2ca.adldap.ADLDAPAdapterConnection</connection-impl-class>
			</connection-definition>

			<transaction-support>NoTransaction</transaction-support>
		
			<authentication-mechanism>
				<authentication-mechanism-type>BasicPassword</authentication-mechanism-type> 
				<credential-interface>javax.resource.spi.security.PasswordCredential</credential-interface> 
			</authentication-mechanism>
			
			<reauthentication-support>false</reauthentication-support>

		</outbound-resourceadapter>
	   	<security-permission>
	   		<security-permission-spec>grant {permission java.security.AllPermission;};</security-permission-spec>
	    </security-permission>
  	</resourceadapter>
</connector>
