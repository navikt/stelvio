<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>no.nav.datapower</groupId>
	<artifactId>deploy-util</artifactId>
	<version>1.0.0-SNAPSHOT</version>
	<name>Deploy util for Datapower application domains</name>

	<!-- Hvis du endrer denne filen og onsker at integrasjon skal ta i bruk den nye versjonen for DP-deploy, gi beskjed til integrasjonsteamet eller person4fdbf4cece95 -->
	
	<properties>
		<deployKeys>${user.home}/deploy-keys/</deployKeys>
	</properties>

	<dependencies>
		<dependency>
			<groupId>no.nav.maven.support</groupId>
			<artifactId>busconfiguration</artifactId>
			<version>${bus-configuration-version}</version>
		</dependency>
	</dependencies>

	<build>
		<outputDirectory>${project.build.directory}/datapower-config/${gateway-name}-${env}</outputDirectory>
		<resources>
			<resource>
				<directory>${project.build.directory}/dependency/busconfiguration-jar/datapower/${gateway-name}</directory>
				<filtering>true</filtering>
			</resource>
			<resource>
				<directory>${project.build.directory}/datapower-config/${gateway-name}-${env}/test/verifier/required-files.xml</directory>
				<filtering>true</filtering>
			</resource>
			<!-- Copy files from bus environment -->
			<resource>
				<directory>${project.build.directory}/dependency/busconfiguration-jar/environments/${envclass}/datapower-cfg-${gateway-name}-files/</directory>
				<targetPath>files/</targetPath>
				<filtering>true</filtering>
			</resource>
			<resource>
				<directory>${project.build.directory}/dependency/busconfiguration-jar/environments/${envclass}/${env}/datapower-cfg-${gateway-name}-files/</directory>
				<targetPath>files/</targetPath>
				<filtering>true</filtering>
			</resource>
			<resource>
				<directory>${project.build.directory}/dependency/busconfiguration-jar/environments/${envclass}/datapower-cfg-${gateway-name}-env-extensions/</directory>
				<targetPath>extensions/</targetPath>
				<filtering>true</filtering>
			</resource>
			<!-- Copy files from key directory structure -->
			<resource>
				<directory>${deployKeys}/${envclass}/${env}/datapower-cfg-${gateway-name}-files/</directory>
				<targetPath>files/</targetPath>
			</resource>
			<resource>
				<directory>${deployKeys}/${envclass}/datapower-cfg-${gateway-name}-files/</directory>
				<targetPath>files/</targetPath>
			</resource>
			<resource>
				<directory>${project.build.directory}/dependency/busconfiguration-jar/datapower/${gateway-name}/src/main/resources</directory>
			</resource>
			<resource>
				<targetPath>../filters/</targetPath>
				<filtering>true</filtering>
				<directory>${project.build.directory}/dependency/busconfiguration-jar/datapower/${gateway-name}/src/main/filters</directory>
			</resource>
		</resources>
		<testResources>
			<testResource>
				<directory>src/test/verifier</directory>
				<filtering>true</filtering>
			</testResource>
		</testResources>
		<plugins>
			<plugin>
				<artifactId>maven-resources-plugin</artifactId>
				<version>2.5</version>
				<executions>
				  <execution>
					<id>copy-resources</id>
					<!-- here the phase you need -->
					<phase>process-classes</phase>
					<goals>
					  <goal>copy-resources</goal>
					</goals>
					<configuration>
					  <outputDirectory>${project.build.directory}/datapower-config/${gateway-name}-${env}</outputDirectory>
					  <resources>
						<resource>
							<directory>${project.build.directory}/temp</directory>
							<filtering>true</filtering>
						</resource>
					  </resources>
					</configuration>            
				  </execution>
				  <execution>
					<id>copy-wps-password</id>
					<!-- here the phase you need -->
					<phase>generate-sources</phase>
					<goals>
					  <goal>copy-resources</goal>
					</goals>
					<configuration>
					  <outputDirectory>${project.build.directory}/dependency</outputDirectory>
					  <resources>
						<resource>
							<directory>${project.build.directory}/temp-busconfig</directory>
							<filtering>true</filtering>
						</resource>
					  </resources>
					</configuration>            
				  </execution>
				  <execution>
					<id>copy-test-resources</id>
					<!-- here the phase you need -->
					<phase>process-classes</phase>
					<goals>
					  <goal>copy-resources</goal>
					</goals>
					<configuration>
					  <outputDirectory>${project.build.directory}/datapower-config/${gateway-name}-${env}/test/verifier</outputDirectory>
					  <resources>
						<resource>
							<directory>${project.build.directory}/dependency/busconfiguration-jar/datapower/${gateway-name}/src/main/resources/test/verifier</directory>
							<filtering>true</filtering>
						</resource>
					  </resources>
					</configuration>            
				  </execution>
				  </executions>
			  </plugin>
			<!-- Unpack bus configuration -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<version>2.0</version>
				<executions>
					<execution>
						<id>unpack-configuration</id>
						<phase>validate</phase>
						<goals>
							<goal>unpack-dependencies</goal>
						</goals>
						<configuration>
							<excludeTransitive>true</excludeTransitive>
							<useSubDirectoryPerArtifact>true</useSubDirectoryPerArtifact>
							<stripVersion>true</stripVersion>
							<outputDirectory>${project.build.directory}/temp-busconfig</outputDirectory>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>no.nav.maven.plugins</groupId>
				<artifactId>maven-properties-plugin</artifactId>
				<version>1.3</version>
				<executions>
					<!-- Load properties from file -->
					<execution>
						<id>load-property-files</id>
						<phase>initialize</phase>
						<goals>
							<goal>load-properties</goal>
						</goals>
						<configuration>
							<files>
								<!-- Add properties from old properties file for backward compatibility -->
								<file>${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/cfg-${gateway-name}-${env}.properties</file>

								<file>${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/datapower-cfg-${gateway-name}.properties</file>
								<file>${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/${envclass}/esb.properties</file>
								<file>${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/${envclass}/${env}/esb.properties</file>
								<file>${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/${envclass}/datapower.properties</file>
								<file>${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/${envclass}/${env}/datapower.properties</file>
								<file>
									${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/${envclass}/datapower-cfg-${gateway-name}.properties
								</file>
								<file>
									${project.build.directory}/temp-busconfig/busconfiguration-jar/environments/${envclass}/${env}/datapower-cfg-${gateway-name}.properties
								</file>
								<file>${deployKeys}/${envclass}/esb.properties</file>
								<file>${deployKeys}/${envclass}/${env}/esb.properties</file>
								<file>${deployKeys}/${envclass}/datapower.properties</file>
								<file>${deployKeys}/${envclass}/${env}/datapower.properties</file>
								<file>${deployKeys}/${envclass}/datapower-cfg-${gateway-name}.properties</file>
								<file>${deployKeys}/${envclass}/${env}/datapower-cfg-${gateway-name}.properties</file>
								<file>${user.home}/vault/${envclass}/${env}/environment.properties</file>
							</files>
						</configuration>
					</execution>
					<!-- Verify that there are no unresolved properties left in the configuration.xml file -->
					<execution>
						<id>verify-resource-filtering</id>
						<phase>test</phase>
						<goals>
							<goal>detect-unresolved-properties</goal>
						</goals>
						<configuration>
							<file>${project.build.directory}/datapower-config/${gateway-name}-${env}/configuration.xml</file>
						</configuration>
					</execution>
					<!-- Verify that there are no unresolved properties left in the AAA files -->
					<execution>
						<id>verify-aaa-resource-filtering</id>
						<phase>test</phase>
						<goals>
							<goal>detect-unresolved-properties</goal>
						</goals>
						<configuration>
							<file>${project.build.directory}/datapower-config/${gateway-name}-${env}/files/local/aaa</file>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<!-- Verify that all required properties are set, once in validate-phase and once in initialize-phase -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-enforcer-plugin</artifactId>
				<version>1.0-beta-1</version>
				<executions>
					<execution>
						<id>enforce-required-properties-validate</id>
						<goals>
							<goal>enforce</goal>
						</goals>
						<phase>validate</phase>
						<configuration>
							<rules>
								<requireProperty>
									<property>gateway-name</property>
								</requireProperty>
								<requireProperty>
									<property>envclass</property>
								</requireProperty>
								<requireProperty>
									<property>env</property>
								</requireProperty>
							</rules>
						</configuration>
					</execution>
					<execution>
						<id>enforce-required-properties-initialize</id>
						<goals>
							<goal>enforce</goal>
						</goals>
						<phase>initialize</phase>
						<configuration>
							<rules>
								<requireProperty>
									<property>datapower.baseurl</property>
								</requireProperty>
								<requireProperty>
									<property>datapower.username</property>
								</requireProperty>
								<requireProperty>
									<property>datapower.password</property>
								</requireProperty>
								<requireProperty>
									<property>datapower.domain</property>
								</requireProperty>
							</rules>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<!-- Verify that all required files are present -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-verifier-plugin</artifactId>
				<version>1.0-beta-1</version>
				<executions>
					<execution>
						<id>verify-required-files</id>
						<phase>test</phase>
						<goals>
							<goal>verify</goal>
						</goals>
						<configuration>
							<basedir>${project.build.directory}/datapower-config/${gateway-name}-${env}</basedir>
							<verificationFile>
								${project.build.directory}/datapower-config/${gateway-name}-${env}/test/verifier/required-files.xml
							</verificationFile>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<!-- Invoke SOAP management interface on server -->
			<plugin>
				<groupId>no.nav.maven.plugins</groupId>
				<artifactId>maven-datapower-plugin</artifactId>
				<version>1.6</version>
				<executions>
					<!-- Wipe domain (delete the old and create a new domain with the same name) -->
					<execution>
						<id>deleteDomain</id>
						<phase>install</phase>
						<goals>
							<goal>deleteDomain</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
						</configuration>
					</execution>
					<execution>
						<id>createDomain</id>
						<phase>install</phase>
						<goals>
							<goal>createDomain</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
						</configuration>
					</execution>
					<execution>
						<id>importFiles</id>
						<phase>install</phase>
						<goals>
							<goal>importFiles</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
							<importDir>${project.build.directory}/datapower-config/${gateway-name}-${env}/files</importDir>
						</configuration>
					</execution>
					<execution>
						<id>importConfig</id>
						<phase>install</phase>
						<goals>
							<goal>importConfig</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
							<configFile>${project.build.directory}/datapower-config/${gateway-name}-${env}/configuration.xml</configFile>
							<extensionsDir>${build.outputDirectory}/extensions/</extensionsDir>
						</configuration>
					</execution>
					<execution>
						<id>saveConfig</id>
						<phase>install</phase>
						<goals>
							<goal>saveConfig</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
						</configuration>
					</execution>
					<execution>
						<id>restartDomain</id>
						<phase>install</phase>
						<goals>
							<goal>restartDomain</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
						</configuration>
					</execution>
					<!-- Test if all objects are up, prints warnings if objects are down -->
					<execution>
						<id>testObjects</id>
						<phase>install</phase>
						<goals>
							<goal>testObjects</goal>
						</goals>
						<configuration>
							<domain>${datapower.domain}</domain>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<!-- Make sure packaging 'wsdl-interface' will be resolved -->
			<plugin>
				<groupId>no.nav.maven.plugins</groupId>
				<artifactId>maven-wsdl-export-plugin</artifactId>
				<version>1.3</version>
				<extensions>true</extensions>
			</plugin>
		</plugins>
	</build>

	<!-- Add dependencies dynamically based on the property 'gateway-name' -->
	<!-- This mechanism is suboptimal, and is a symptom of using Maven to define a deployscript for multiple artifacts -->
	<profiles>
		<profile>
			<id>secgw</id>
			<activation>
				<property>
					<name>gateway-name</name>
					<value>secgw</value>
				</property>
			</activation>
			<build>
				<plugins>
					<!-- Run plugin to get version numbers for modules -->
					<plugin>
						<groupId>no.nav.maven.plugins</groupId>
						<artifactId>maven-datapower-config-generator-plugin</artifactId>
						<version>2.9</version>
						<executions>
							<execution>
								<id>getVersions</id>
								<phase>process-sources</phase>
								<goals>
									<goal>getVersions</goal>
								</goals>
								<configuration>
									<versions>
										<version>
											<variableName>ESB_MODULES_VERSION</variableName>
											<exposedAs>esb-modules-version</exposedAs>
										</version>
										<version>
											<variableName>NAV_MODULES_VERSION</variableName>
											<exposedAs>nav-modules-version</exposedAs>
										</version>
										<version>
											<variableName>ESB_MODULES_VERSION</variableName>
											<exposedAs>esb-version</exposedAs>
										</version>
									</versions>
								</configuration>
							</execution>
						</executions>
					</plugin>	
					<!-- Run plugin to generate config -->
					<plugin>
						<groupId>no.nav.maven.plugins</groupId>
						<artifactId>maven-datapower-config-generator-plugin</artifactId>
						<version>2.9</version>
						<dependencies>
							<dependency>
								<artifactId>nav-ikt-personkort-integration-uti</artifactId>
								<groupId>no.nav.3rdparty.uti</groupId>
								<type>wsdl-interface</type>
								<version>1.0.1</version>
							</dependency> 
							<dependency>
								<artifactId>nav-sbl-tms-backend-webservices</artifactId>
								<groupId>no.nav.sbl.tms</groupId>
								<type>wsdl-interface</type>
								<version>2.0.13</version>
							</dependency> 
						</dependencies>
						<executions>
							<execution>
								<id>generateConfig</id>
								<phase>compile</phase>
								<goals>
									<goal>generate</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<wsdlDeps>
								<wsdlDependency>
									<groupId>no.nav.esb</groupId>
									<artifactId>esb-modules</artifactId>
									<version>${esb-modules-version}</version>
									<type>pom</type>
								</wsdlDependency>
								<wsdlDependency>
									<groupId>no.nav.esb</groupId>
									<artifactId>nav-modules</artifactId>
									<version>${nav-modules-version}</version>
									<type>pom</type>
								</wsdlDependency>
								<wsdlDependency>
									<artifactId>nav-ikt-personkort-integration-uti</artifactId>
									<groupId>no.nav.3rdparty.uti</groupId>
									<type>wsdl-interface</type>
									<version>1.0.1</version>
								</wsdlDependency> 
								<wsdlDependency>
									<artifactId>nav-sbl-tms-backend-webservices</artifactId>
									<groupId>no.nav.sbl.tms</groupId>
									<type>wsdl-interface</type>
									<version>2.0.13</version>
								</wsdlDependency> 
							</wsdlDeps>
							<policies>
								<policy>
									<name>NAV</name>
									<artifacts>
										<artifact>
											<artifactId>nav-cons-pen-pselv-.*</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-tjenestepensjon</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-samhandler</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-fullmakt</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-navorgenhet</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-oppgave</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-opptjening</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-opptjening-tjeneste</artifactId>
											<groupId>no.nav.esb.nav</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-tjeneste-institusjonsopphold</artifactId>
											<groupId>no.nav.esb.nav</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-person</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-pjoark030</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-ppen001</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-ppen003</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-pen-pen-ppen008</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-oko-dineutbet</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-cons-test-getapplicationversion</artifactId>
											<groupId>no.nav.esb.layers.modules.cons</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-tjeneste-journal</artifactId>
											<groupId>no.nav.esb.nav</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-tjeneste-journalbehandling</artifactId>
											<groupId>no.nav.esb.nav</groupId>
										</artifact>
										<artifact>
											<artifactId>nav-tjeneste-medlemskap</artifactId>
											<groupId>no.nav.esb.nav</groupId>	
										</artifact>
										<artifact>
											<artifactId>nav-tjeneste-trekk</artifactId>
											<groupId>no.nav.esb.nav</groupId>	
										</artifact>	
										<artifact>
											<artifactId>nav-tjeneste-behandleTrekk</artifactId>
											<groupId>no.nav.esb.nav</groupId>	
										</artifact>	
									</artifacts>
								</policy>
								<policy>
									<name>SBLUTBUTI</name>
									<artifacts>
										<artifact>
											<artifactId>nav-ikt-personkort-integration-uti</artifactId>
											<groupId>no.nav.3rdparty.uti</groupId>
											<classifier>wsdlif</classifier>
										</artifact>
									</artifacts>
								</policy>
								<policy>
									<name>TMS</name>
									<artifacts>
										<artifact>
											<artifactId>nav-sbl-tms-backend-webservices</artifactId>
											<groupId>no.nav.sbl.tms</groupId>
											<classifier>wsdlif</classifier>
										</artifact>
									</artifacts>
								</policy>
							</policies>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>partner-gw</id>
			<activation>
				<property>
					<name>gateway-name</name>
					<value>partner-gw</value>
				</property>
			</activation>
			<build>
				<plugins>
					<!-- Run plugin to get version numbers for modules -->
						<plugin>
							<groupId>no.nav.maven.plugins</groupId>
							<artifactId>maven-datapower-config-generator-plugin</artifactId>
							<version>2.9</version>
							<executions>
								<execution>
									<id>getVersions</id>
									<phase>process-sources</phase>
									<goals>
										<goal>getVersions</goal>
									</goals>
									<configuration>
										<versions>
											<version>
												<variableName>ESB_MODULES_VERSION</variableName>
												<exposedAs>esb-modules-version</exposedAs>
											</version>
											<version>
												<variableName>EKSTERN_PENSJON_MODULES_VERSION</variableName>
												<exposedAs>ekstern-pensjon-modules-version</exposedAs>
											</version>
											<version>
												<variableName>EKSTERN_MODULES_VERSION</variableName>
												<exposedAs>ekstern-modules-version</exposedAs>
											</version>
											<version>
												<variableName>ESB_MODULES_VERSION</variableName>
												<exposedAs>esb-version</exposedAs>
											</version>
										</versions>
									</configuration>
								</execution>
							</executions>
						</plugin>
						<!-- Run plugin to generate config -->
						<plugin>
							<groupId>no.nav.maven.plugins</groupId>
							<artifactId>maven-datapower-config-generator-plugin</artifactId>
							<version>2.9</version>
							<executions>
								<execution>
									<id>generateConfig</id>
									<phase>compile</phase>
									<goals>
										<goal>generate</goal>
									</goals>
								</execution>
							</executions>
							<configuration>
								<wsdlDeps>
									<wsdlDependency>
										<groupId>no.nav.esb</groupId>
										<artifactId>esb-modules</artifactId>
										<version>${esb-modules-version}</version>
										<type>pom</type>
									</wsdlDependency>
									<wsdlDependency>
										<groupId>no.nav.esb</groupId>
										<artifactId>ekstern-pensjon-modules</artifactId>
										<version>${ekstern-pensjon-modules-version}</version>
										<type>pom</type>
									</wsdlDependency>
									<wsdlDependency>
										<groupId>no.nav.esb</groupId>
										<artifactId>ekstern-modules</artifactId>
										<version>${ekstern-modules-version}</version>
										<type>pom</type>
									</wsdlDependency>
								</wsdlDeps>
								<policies>
									<policy>
										<name>ELSAMInboundTP</name>
										<rewriteEndpoints>true</rewriteEndpoints>
										<artifacts>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-tptilb-registreretpforholdV0_1</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-tptilb-tpsamordningregistrering</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
										</artifacts>
									</policy>
									<policy>
										<name>ELSAMInboundURL</name>
										<rewriteEndpoints>true</rewriteEndpoints>
										<artifacts>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-tptilb-simuleringV1_0.*</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-fk-afpprivat</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-tptilb-arbeidogaktivitet</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<!-- ekstern-pensjon-buss -->
											<artifact>
												<groupId>no.nav.esb.ekstern.pensjon</groupId>
												<artifactId>ekstern-pensjon-tjeneste-beregning</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.ekstern.pensjon</groupId>
												<artifactId>ekstern-pensjon-tjeneste-person</artifactId>
												<classifier>wsexports</classifier>
											</artifact>	
											<artifact>
												<groupId>no.nav.esb.ekstern.pensjon</groupId>
												<artifactId>ekstern-pensjon-tjeneste-tptilb</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<!-- ekstern-buss -->
											<artifact>
												<groupId>no.nav.esb.ekstern</groupId>
												<artifactId>ekstern-tjeneste-navytelsesinfo</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
										</artifacts>
									</policy>
									<policy>
										<name>NorskPensjonInbound</name>
										<rewriteEndpoints>true</rewriteEndpoints>
										<artifacts>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-np-simuleringV1_0.*</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.layers.modules.cons</groupId>
												<artifactId>nav-cons-elsam-np-tjenestepensjon</artifactId>
												<classifier>wsexports</classifier>
											</artifact>
										</artifacts>
									</policy>
									<policy>
										<name>ELSAMOutbound</name>
										<artifacts>
											<artifact>
												<groupId>no.nav.esb.layers.modules.prod</groupId>
												<artifactId>nav-prod-elsam-simuleretjenestepensjon</artifactId>
												<classifier>wsimports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.layers.modules.prod</groupId>
												<artifactId>nav-prod-elsam-tpsamordningvarsling</artifactId>
												<classifier>wsimports</classifier>
											</artifact>
											<artifact>
												<groupId>no.nav.esb.ekstern.pensjon</groupId>
												<artifactId>ekstern-pensjon-tjeneste-tjenestepensjonSimulering</artifactId>
												<classifier>wsimports</classifier>
											</artifact>
										</artifacts>
									</policy>
									<policy>
										<name>NorskPensjonOutbound</name>
										<artifacts>
											<artifact>
												<groupId>no.nav.esb.layers.modules.prod</groupId>
												<artifactId>nav-prod-sto-norskpensjon</artifactId>
												<classifier>wsimports</classifier>
											</artifact>
										</artifacts>
									</policy>
									<policy>
										<name>SMSOutbound</name>
										<artifacts>								
											<artifact>
												<groupId>no.nav.esb.layers.modules.prod</groupId>
												<artifactId>nav-prod-dok-sms</artifactId>
												<classifier>wsimports</classifier>
											</artifact>
										</artifacts>
									</policy>
								</policies>
							</configuration>
						</plugin>
						<!-- Make sure packaging 'wsdl-interface' will be resolved -->
					<plugin>
						<groupId>no.nav.maven.plugins</groupId>
						<artifactId>maven-wsdl-export-plugin</artifactId>
						<version>1.3</version>
						<extensions>true</extensions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>nhn-gw</id>
			<activation>
				<property>
					<name>gateway-name</name>
					<value>nhn-gw</value>
				</property>
			</activation>
			<properties>
				<gateway-version>1.0.2</gateway-version>
			</properties>
			<dependencies>
				<dependency>
					<artifactId>nhn-gw</artifactId>
					<groupId>no.nav.datapower.cfg</groupId>
					<version>${gateway-version}</version>
				</dependency>
			</dependencies>
		</profile>
	</profiles>

</project>
