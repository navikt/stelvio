<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<!-- TODO check if jsf- and/or swf-scopes can be used -->
	<bean id="prs.henvendelse.oversiktForm"
	      class="no.nav.presentation.pensjon.psak.henvendelse.OversiktOverHenvendelserForm" scope="prototype"/>

	<bean id="prs.henvendelse.oversiktAction"
	      class="no.nav.presentation.pensjon.psak.henvendelse.OversiktOverHenvendelserAction">
		<property name="formObjectName" value="prs.henvendelse.oversiktForm"/>
		<property name="formObjectClass" value="no.nav.presentation.pensjon.psak.henvendelse.OversiktOverHenvendelserForm"/>
		<property name="formObjectScope" value="FLOW"/>
		<property name="validator">
			<ref local="hentOversiktOverHenvendelserValidator"/>
		</property>
		<property name="henvendelseService">
			<ref local="henvendelseService"/>
		</property>
	</bean>

	<!--  bean def for HenvendelseService, update with real implementation class when ready -->
	<bean id="henvendelseService" class="no.nav.service.pensjon.henvendelse.impl.HenvendelseServiceMock"/>

	<bean id="hentOversiktOverHenvendelserValidator"
	      class="no.nav.presentation.pensjon.common.validation.JsfValangValidator">
		<property name="messageSource" ref="messageSource"/>
		<property name="customFunctions">
			<map>
				<entry key="checkParameters">
					<value>no.nav.presentation.pensjon.psak.henvendelse.SpesifikasjonValidatorFunction</value>
				</entry>
				<entry key="checkTidsperiode">
					<value>no.nav.presentation.pensjon.psak.henvendelse.TidsperiodeValidatorFunction</value>
				</entry>
			</map>
		</property>
		<property name="valang">
			<value>
				<![CDATA[
			    	{ valgtTidsperiode : checkTidsperiode(?) == true : 'Ugyldig tidsperiode' : 'oversiktOverHenvendelser.ugyldigTidsperiode' }			    
				   	{ valgtSok : checkParameters(?, valgtFagomrade) == true : 'Ugyldig sok' : 'oversiktOverHenvendelser.ugyldigSok' }
			    ]]>
			</value>
		</property>
	</bean>

	<!-- validering var:

								{ valgtTidsperiode : ? in 'Siste 4 uker', 'Siste 5 dager' : 'Ugyldig tidsperiode' : 'oversiktOverHenvendelser.ugyldigTidsperiode' }
								{ valgtFagomrade : ? in 'Pensjon', 'Bidrag', 'Alle' : 'Ugyldig fagomrade' : 'oversiktOverHenvendelser.ugyldigFagomrade' }
								 { valgtFagomrade : ? == 'Alle' AND valgtSok == 'antall' : 'Ugyldig sok' : 'oversiktOverHenvendelser.ugyldigSok' }
		 -->

</beans>