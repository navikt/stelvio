<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<!-- TODO check if jsf- and/or swf-scopes can be used -->
	<bean id="prs.henvendelse.overviewAction"
	      class="no.stelvio.presentation.star.example.henvendelse.OverviewOfHenvendelserAction">
		<property name="formObjectName" value="prsHenvendelseOverviewForm"/>
		<property name="formObjectClass" value="no.stelvio.presentation.star.example.henvendelse.OverviewOfHenvendelserForm"/>
		<property name="validator">
			<ref local="prs.henvendelse.overviewValidator"/>
		</property>
		<property name="searchHenvendelseService" ref="prs.starexample.searchHenvendelseService"/>
		<property name="codesTableManager" ref="prs.starexample.codesTableManager"/>
	</bean>

	<bean id="prs.henvendelse.overviewValidator"
	      class="no.stelvio.presentation.star.example.common.validation.JsfValangValidator">
		<property name="messageSource" ref="messageSource"/>
		<property name="customFunctions">
			<map>
				<entry key="checkParameters">
					<value>no.stelvio.presentation.star.example.henvendelse.SpesifikasjonValidatorFunction</value>
				</entry>
				<entry key="checkTidsperiode">
					<value>no.stelvio.presentation.star.example.henvendelse.TidsperiodeValidatorFunction</value>
				</entry>
			</map>
		</property>
		<property name="valang">
			<value>
				<![CDATA[
			    	{ valgtTidsperiode : checkTidsperiode(?) == true : 'Ugyldig tidsperiode' : 'oversiktOverHenvendelser.ugyldigTidsperiode' }			    
				   	{ valgtSok : checkParameters(?, valgtFagomrade) == true : 'Ugyldig sok' : 'oversiktOverHenvendelser.ugyldigSok' }
			    ]]>
			</value>
		</property>
	</bean>

	<!-- validering var:

								{ valgtTidsperiode : ? in 'Siste 4 uker', 'Siste 5 dager' : 'Ugyldig tidsperiode' : 'oversiktOverHenvendelser.ugyldigTidsperiode' }
								{ valgtFagomrade : ? in 'Pensjon', 'Bidrag', 'Alle' : 'Ugyldig fagomrade' : 'oversiktOverHenvendelser.ugyldigFagomrade' }
								 { valgtFagomrade : ? == 'Alle' AND valgtSok == 'antall' : 'Ugyldig sok' : 'oversiktOverHenvendelser.ugyldigSok' }
		 -->

</beans>