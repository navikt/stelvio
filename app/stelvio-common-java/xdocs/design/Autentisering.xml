<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Autentisering</title>
	</properties>
	<body>
		<section name="Autentisering">
			<subsection name="Pålogging">
				<p>
				En mekanisme kalt Basic Authentication benyttes til å autentisere brukeren ved
				pålogging til Bidragssystemet. Denne mekanismen fungerer slik:
				Når bruker forsøker å aksessere første vindu i Bidragssystemet (oppgaveliste), vil 
				et vindu åpnes og brukeren bes om å oppgi brukernavn og passord. Vinduet vil ligne på 
				standardvinduet vist i følgende figur:
				</p>
				<p>
				<img src="../images/design/basicauth.gif" />

				</p>
				<h4>Konfigurasjon</h4>
				<p>
				<p>
				Konfigurering av Basic Authentication gjøres i filen web.xml:
<source><![CDATA[
<login-config>
	<auth-method>BASIC</auth-method>
	<realm-name>BISYS</realm-name>
</login-config>
]]></source>					
				
				Websphere må konfigureres
				til å aksessere LDAP for brukernavn/passord-sjekk
				</p>
				
				<img src="../images/design/palogg.gif" />
				<p>				
				De forskjellige stegene som er vist i figuren er beskrevet her:
				</p>
				<ol>
				<li>Bruker forsøker å aksessere oppgavelisten</li>
				<li>Oppgavelisten er en beskyttet ressurs og bruker må autentisere seg for å få tilgang</li>
				<li>Bruker bes om å oppgi sitt brukernavn og passord</li>
				<li>Bruker oppgir sitt brukernavn og passord</li>
				<li>Brukernavn og passord sendes til J2EE-sikkerhetsmekanismene i Websphere</li>
				<li>Websphere leser brukernavn og passord fra LDAP</li>
				<li>Brukernavn og passord returneres fra LDAP</li>
				<li>Passord fra LDAP valideres med innskrevet passord</li>
				<li>Hvis bruker eksisterer og passord er korrekt, så sendes bruker til oppgaveliste, hvis ikke, så  sendes bruker tilbake til punkt 3.</li>
				<li>Det sjekkes om bruker har lagret en valgt enhet i sesjonsobjektet. I og med at bruker  nettopp har logget seg på så er ingen enhet valgt. Bruker sendes til side for valg av enhet.</li>
				<li>Kall for å hente brukerens tilgjengelige enheter kjøres mot LDAP</li>
				<li>Enheter som bruker har tilgang til returneres fra LDAP</li> 
				<li>Hvis liste som returneres inneholder mer enn 1 enhet, så vises denne listen for brukeren slik at enhet kan velges, bruker velger ønsket enhet og denne lagres i sesjonen. Hvis liste innholder bare 1 enhet, så lagres denne i sesjonen uten at bruker trenger å foreta seg noe.</li> 
				<li>Oppgaveliste vises for bruker</li>
				</ol>
				</p>
				
			<h4>Logout</h4>
			<p>
			J2EE spesifiserer ikke hvordan avlogging skal gjøres, så IBM har laget en utvidelse av J2EE slik at form-based avlogging 
			muliggjøres. Bruker må etter avlogging autentisere seg på nytt for å få tilgang til beskyttede ressurser igjen. Formen må 
			benyttes innenfor den samme Web-applikasjonen som bruker blir sendt til etter avlogging.		
			En enkel logout form som inneholder bare de nødvendige elementene:
			</p>
<source><![CDATA[			
	<html> 
	  <body>
	    <form method=”POST” action="ibm_security_logout">
	      <input type="submit" name="logout" value="Logout">
	      <input type="hidden" name="logoutExitPage" value="/login.jsp">
	    </form>
	  </body>
	</html>
]]></source>		

			<p>
			Form-based login må benyttes hvis logout beskrevet over skal virke. ”Basic Authentication” kan altså ikke 
			velges hvis form-based logout skal benyttes. Måten å logge av på ved bruk av ”Basic Authentication” er 
			å lukke nettleseren.
			</p>

<source><![CDATA[
<form method="post" action="j_security_check">
	<table width="80%">
		<tr>
			<td width="20%" align="right">
				Userid:
			</td>
			<td>
				<input size="20" type="text" name="j_username" maxlength="25">
			</td>
		</tr>
		<tr>
			<td align="right">
				Password:
			</td>
			<td>
				<input size="20" type="password" name="j_password" maxlength="25">
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<input type="submit" name="action" value="Login">&nbsp;
				<input type="reset" name="reset" value="Clear">
			</td>
		</tr>
	</table>
</form>
]]></source>
	
				
				
				<td>Se dette dokumentet for ytterligere informasjon: <a href="\\S2900002\Prosjektarkiv\Moderniseringsarbeidet\Ma_arkiv\SAF_Speil\SAF610009.004 Detaljert design av sikkerhetsarkitektur for Bidrag 2-prosjektet.doc">Design i Word-format.</a></td>
				
			</subsection>
		
						
			<subsection name = "Endringslogg">
<source><![CDATA[
$Log$
Revision 1.5  2004/07/09 11:13:50  shc2920
Lagt til litt rundt avlogging

Revision 1.4  2004/06/25 15:13:07  shc2920
Fiksa mergekonflikt
Endret beskrivelse

Revision 1.3  2004/06/16 13:53:01  psa2920
la til endringslogg
]]>			
</source>
			</subsection>
		</section>
	</body>
</document>

