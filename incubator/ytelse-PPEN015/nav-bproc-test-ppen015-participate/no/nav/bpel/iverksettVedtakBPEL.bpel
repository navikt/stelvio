<?xml version="1.0" encoding="UTF-8"?>
<bpws:process xmlns:bpws="http://schemas.xmlsoap.org/ws/2004/03/business-process/" xmlns:ns="http://nav-bproc-pen-ppen015/nav-bproc-pen-ppen015/iverksettVedtakBPELArtifacts" xmlns:ns0="http://nav-lib-pen/no/nav/lib/pen/gbo" xmlns:ns1="http://nav-lib-pen/no/nav/lib/pen/inf/IverksettVedtak" xmlns:ns11="http://nav-lib-sah/no/nav/lib/sah/gbo" xmlns:ns12="http://nav-lib-sah/no/nav/lib/sah/inf/Brevbestilling" xmlns:ns13="http://nav-lib-sak/no/nav/lib/sak/gbo" xmlns:ns14="http://nav-lib-sak/no/nav/lib/sak/inf" xmlns:ns15="http://nav-lib-oko/no/nav/lib/oko/inf/OppdragOnline" xmlns:ns16="http://nav-lib-pen/no/nav/lib/pen/inf/Grunnlag" xmlns:ns17="http://nav-lib-pen/no/nav/lib/pen/inf/Beregning" xmlns:ns18="http://nav-bproc-pen-ppen015/no/nav/inf/OpptjeningAsync" xmlns:ns19="http://nav-bproc-pen-ppen015/no/nav/inf/SamordningAsync" xmlns:ns2="http://nav-lib-pen/no/nav/lib/pen/inf/Vedtak" xmlns:ns20="http://nav-bproc-pen-ppen015/no/nav/inf/BrevbestillingAsync" xmlns:ns21="http://nav-lib-peh/no/nav/lib/peh/gbo" xmlns:ns22="http://nav-lib-peh/no/nav/lib/peh/inf/Fullmakt" xmlns:ns23="http://nav-bproc-pen-ppen015/no/nav/inf/PensjonssakAsync" xmlns:ns24="http://nav-bproc-pen-ppen015/no/nav/inf/GrunnlagAsync" xmlns:ns25="http://nav-bproc-pen-ppen015/no/nav/inf/VedtakAsync" xmlns:ns26="http://nav-bproc-pen-ppen015-1.3.1/no/nav/inf/KravAsync" xmlns:ns27="http://nav-bproc-pen-ppen015-1.2.2/no/nav/inf/FullmaktAsync" xmlns:ns28="http://nav-bproc-pen-ppen015-1.2.2/no/nav/inf/OppgaveAsync" xmlns:ns29="http://nav-bproc-pen-ppen015-1.2.2/no/nav/inf/OppdragOnlineAsync" xmlns:ns3="http://nav-lib-pen/no/nav/lib/pen/inf/Pensjonssak" xmlns:ns30="http://nav-bproc-pen-ppen015/no/nav/inf/BeregningAsync" xmlns:ns4="http://nav-lib-pen/no/nav/lib/pen/inf" xmlns:ns5="http://nav-lib-sto/no/nav/lib/sto/gbo" xmlns:ns6="http://nav-lib-sto/no/nav/lib/sto/inf/Samordning" xmlns:ns7="http://nav-lib-oko/no/nav/lib/oko/gbo" xmlns:ns8="http://nav-lib-oko/no/nav/lib/oko/inf/Oppdrag" xmlns:ns9="http://nav-bproc-test-ppen015/no/nav/inf/IverksettVedtakTest" xmlns:wpc="http://www.ibm.com/xmlns/prod/websphere/business-process/6.0.0/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/" name="iverksettVedtakBPEL" suppressJoinFailure="yes" targetNamespace="http://nav-bproc-pen-ppen015/nav-bproc-pen-ppen015" wpc:autoDelete="no" wpc:autonomy="peer" wpc:displayName="iverksettVedtakBPEL" wpc:id="1" wpc:ignoreMissingData="yes" wpc:validFrom="2010-06-29T08:00:00">
  <wpc:customProperty name="terminatedSuccessful">
    <wpc:value>false</wpc:value>
  </wpc:customProperty>
  <wpc:customProperty name="terminatedReason">
    <wpc:value>Normal terminering</wpc:value>
  </wpc:customProperty>
  <wpc:customProperty name="vedtakId">
    <wpc:value>IKKE SATT</wpc:value>
  </wpc:customProperty>
  <wpc:javaGlobals>
    <wpc:import packages="commonj.sdo.DataObject"/>
    <wpc:import packages="java.util.Date"/>
    <wpc:import packages="com.ibm.websphere.sca.sdo.DataFactory"/>
    <wpc:import packages="java.util.Calendar"/>
    <wpc:import packages="com.ibm.bpe.api.BpelException"/>
    <wpc:import packages="java.util.List"/>
    <wpc:import packages="java.util.ArrayList"/>
    <wpc:import packages="no.stelvio.common.bus.util.DateUtil"/>
    <wpc:import packages="java.util.Iterator"/>
    <wpc:import packages="pen.lib.nav.no.nav.lib.pen.inf.pensjonssak.Pensjonssak"/>
    <wpc:import packages="pen.lib.nav.no.nav.lib.pen.inf.vedtak.Vedtak"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KBehandlingT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KBatchbrev"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KKravgjelderT"/>
    <wpc:import packages="no.nav.java.constants.popp.KKildePoppT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.TeksterOgFasteVerdier"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KVedtakS"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KVedtakT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KSakT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KSakS"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KTilgangT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KTilgangArsak"/>
    <wpc:import packages="no.nav.java.constants.sak.oppgave.KOppgaveT"/>
    <wpc:import packages="no.nav.java.constants.sak.oppgave.KFagomrade"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KUnderkategoriT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KKontrollpunktT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KFagomradeT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KFullmaktT"/>
    <wpc:import packages="no.nav.java.constants.pen.pen.KBrevMottakerT"/>
  </wpc:javaGlobals>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/IverksettVedtak.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/IverksettVedtak"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Opptjening.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Pensjonssak.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/Pensjonssak"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Vedtak.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/Vedtak"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="iverksettVedtakBPELArtifacts.wsdl" namespace="http://nav-bproc-pen-ppen015/nav-bproc-pen-ppen015/iverksettVedtakBPELArtifacts"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/IverksettVedtak.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/IverksettVedtak"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../xsd-includes/http.nav-lib-pen.no.nav.lib.pen.gbo.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Vedtak.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/Vedtak"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Pensjonssak.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/Pensjonssak"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Opptjening.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/sto/gbo/GBOOpprettVedtakSamordningRequest.xsd" namespace="http://nav-lib-sto/no/nav/lib/sto/gbo"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/sto/inf/Samordning.wsdl" namespace="http://nav-lib-sto/no/nav/lib/sto/inf/Samordning"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../xsd-includes/http.nav-lib-oko.no.nav.lib.oko.gbo.xsd" namespace="http://nav-lib-oko/no/nav/lib/oko/gbo"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/oko/inf/Oppdrag.wsdl" namespace="http://nav-lib-oko/no/nav/lib/oko/inf/Oppdrag"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/sah/gbo/GBOBrevbestillingRequest.xsd" namespace="http://nav-lib-sah/no/nav/lib/sah/gbo"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/sah/inf/Brevbestilling.wsdl" namespace="http://nav-lib-sah/no/nav/lib/sah/inf/Brevbestilling"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../xsd-includes/http.nav-lib-sak.no.nav.lib.sak.gbo.xsd" namespace="http://nav-lib-sak/no/nav/lib/sak/gbo"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/sak/inf/Oppgave.wsdl" namespace="http://nav-lib-sak/no/nav/lib/sak/inf"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/oko/inf/OppdragOnline.wsdl" namespace="http://nav-lib-oko/no/nav/lib/oko/inf/OppdragOnline"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Grunnlag.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/Grunnlag"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/pen/inf/Beregning.wsdl" namespace="http://nav-lib-pen/no/nav/lib/pen/inf/Beregning"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/OpptjeningAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/OpptjeningAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/SamordningAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/SamordningAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/BrevbestillingAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/BrevbestillingAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../lib/peh/inf/Fullmakt.wsdl" namespace="http://nav-lib-peh/no/nav/lib/peh/inf/Fullmakt"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../xsd-includes/http.nav-lib-peh.no.nav.lib.peh.gbo.xsd" namespace="http://nav-lib-peh/no/nav/lib/peh/gbo"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/PensjonssakAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/PensjonssakAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/GrunnlagAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/GrunnlagAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/VedtakAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/VedtakAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/KravAsync.wsdl" namespace="http://nav-bproc-pen-ppen015-1.3.1/no/nav/inf/KravAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/FullmaktAsync.wsdl" namespace="http://nav-bproc-pen-ppen015-1.2.2/no/nav/inf/FullmaktAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/OppgaveAsync.wsdl" namespace="http://nav-bproc-pen-ppen015-1.2.2/no/nav/inf/OppgaveAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/OppdragOnlineAsync.wsdl" namespace="http://nav-bproc-pen-ppen015-1.2.2/no/nav/inf/OppdragOnlineAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/BeregningAsync.wsdl" namespace="http://nav-bproc-pen-ppen015/no/nav/inf/BeregningAsync"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../inf/IverksettVedtakTest.wsdl" namespace="http://nav-bproc-test-ppen015/no/nav/inf/IverksettVedtakTest"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOverforOmsorgsopptjeningListeRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOPersonOpptjeningsgrunnlagListe.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOPensjonssakListe.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/sak/gbo/GBOOppgaveListe.xsd" namespace="http://nav-lib-sak/no/nav/lib/sak/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentVedtakRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentUttrekkTilOppdragstransaksjonRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentOmsorgGodskrGrunnlagRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/oko/gbo/GBOOppdrag.xsd" namespace="http://nav-lib-oko/no/nav/lib/oko/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOKontrollpunkt.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentOmsorgOverfGrunnlagRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/peh/gbo/GBOFullmaktListe.xsd" namespace="http://nav-lib-peh/no/nav/lib/peh/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOmsorgGodskrGrunnlag.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOmsorgGodskrGrunnlagListe.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOMottaOSKvitteringRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOVedtaksId.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOpprettsakRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/sak/gbo/GBOHentOppgaveListeRequest.xsd" namespace="http://nav-lib-sak/no/nav/lib/sak/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOVedtak.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOKravhode.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOverforOmsorgsopptjeningListeResponse.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentPensjonssakRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOmsorgOverfGrunnlagListe.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/sak/gbo/GBOOppgave.xsd" namespace="http://nav-lib-sak/no/nav/lib/sak/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOpptjeningGrunnlag.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOIverksettVedtakRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentPensjonssakListeRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOPensjonssak.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOBehandleOSKvitteringResponse.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentUttrekkTilOppdragstransaksjonResponse.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOBatchBrevdata.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentOpptjeningsgrunnlagListeRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/peh/gbo/GBOHentFullmaktListeRequest.xsd" namespace="http://nav-lib-peh/no/nav/lib/peh/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOppdaterPoppVedIverksettelseRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOHentBatchBrevdata.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOBehandleOSKvitteringRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOLagreVedtakStatusRequest.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../lib/pen/gbo/GBOOpptjening.xsd" namespace="http://nav-lib-pen/no/nav/lib/pen/gbo"/>
  <bpws:partnerLinks>
    <bpws:partnerLink myRole="IverksettVedtakRole" name="IverksettVedtak" partnerLinkType="ns:IverksettVedtakPLT"/>
    <bpws:partnerLink name="SamordningAsyncPartner" partnerLinkType="ns:PartnerPLT" partnerRole="partnerRole"/>
    <bpws:partnerLink name="IverksettVedtakPartner" partnerLinkType="ns:PartnerPLT1" partnerRole="partnerRole"/>
    <bpws:partnerLink name="OppdragOnlineAsyncPartner" partnerLinkType="ns:PartnerPLT2" partnerRole="partnerRole"/>
    <bpws:partnerLink name="OppgaveAsyncPartner" partnerLinkType="ns:PartnerPLT3" partnerRole="partnerRole"/>
    <bpws:partnerLink name="BeregningAsyncPartner" partnerLinkType="ns:PartnerPLT6" partnerRole="Reference"/>
    <bpws:partnerLink name="OpptjeningAsyncPartner" partnerLinkType="ns:PartnerPLT7" partnerRole="Reference"/>
    <bpws:partnerLink name="BrevbestillingAsyncPartner" partnerLinkType="ns:BrevbestillingAsyncPartnerPLT" partnerRole="Reference"/>
    <bpws:partnerLink name="FullmaktAsyncPartner" partnerLinkType="ns:FullmaktPartnerPLT" partnerRole="Reference"/>
    <bpws:partnerLink name="PensjonssakAsyncPartner" partnerLinkType="ns:PensjonssakAsyncPLT" partnerRole="Interface"/>
    <bpws:partnerLink name="GrunnlagAsyncPartner" partnerLinkType="ns:GrunnlagAsyncPLT" partnerRole="Interface"/>
    <bpws:partnerLink name="VedtakAsyncPartner" partnerLinkType="ns:VedtakAsyncPLT" partnerRole="Interface"/>
    <bpws:partnerLink name="KravAsyncPartner" partnerLinkType="ns:KravAsyncPartnerPLT" partnerRole="Reference"/>
  </bpws:partnerLinks>
  <bpws:variables>
    <bpws:variable name="IverksettVedtakRequest" type="ns0:GBOIverksettVedtakRequest" wpc:id="2"/>
    <bpws:variable name="IverksettVedtakResponse" type="xsd:string" wpc:id="3"/>
    <bpws:variable name="vedtak" type="ns0:GBOVedtak" wpc:id="13"/>
    <bpws:variable name="kontrollpunkt" type="ns0:GBOKontrollpunkt" wpc:id="17"/>
    <bpws:variable name="lagreVedtakResponse" type="xsd:string" wpc:id="50"/>
    <bpws:variable name="hentPensjonssakRequest" type="ns0:GBOHentPensjonssakRequest" wpc:id="59"/>
    <bpws:variable name="pensjonssak" type="ns0:GBOPensjonssak" wpc:id="62"/>
    <bpws:variable name="lagreVedtakStatusRequest" type="ns0:GBOLagreVedtakStatusRequest" wpc:id="67"/>
    <bpws:variable name="lagreVedtakStatusResponse" type="xsd:string" wpc:id="70"/>
    <bpws:variable name="sendSamordningFerdigRequest" type="ns0:GBOVedtaksId" wpc:id="82"/>
    <bpws:variable name="samordningFerdig" type="ns0:GBOVedtaksId" wpc:id="86"/>
    <bpws:variable name="hentUttrekkTilOppdragstransaksjonRequest" type="ns0:GBOHentUttrekkTilOppdragstransaksjonRequest" wpc:id="89"/>
    <bpws:variable name="hentUttrekkTilOppdragstransaksjonResponse" type="ns0:GBOHentUttrekkTilOppdragstransaksjonResponse" wpc:id="90"/>
    <bpws:variable name="sendAsynkronOppdragsmeldingListeRequest" type="ns7:GBOOppdrag" wpc:id="94"/>
    <bpws:variable name="hentBatchBrevDataRequest" type="ns0:GBOHentBatchBrevdata" wpc:id="98"/>
    <bpws:variable name="batchBrevData" type="ns0:GBOBatchBrevdata" wpc:id="99"/>
    <bpws:variable name="bestillBrevRequest" type="ns11:GBOBrevbestillingRequest" wpc:id="105"/>
    <bpws:variable name="bestillBrevResponse" type="xsd:string" wpc:id="146"/>
    <bpws:variable name="oppgave" type="ns13:GBOOppgave" wpc:id="159"/>
    <bpws:variable name="samhandlerSvar" type="ns0:GBOVedtaksId" wpc:id="168"/>
    <bpws:variable name="hentOmsorgGodskrGrunnlagRequest" type="ns0:GBOHentOmsorgGodskrGrunnlagRequest" wpc:id="201"/>
    <bpws:variable name="omsorgGodskrGrunnlag" type="ns0:GBOOmsorgGodskrGrunnlagListe" wpc:id="202"/>
    <bpws:variable name="beregnPensjonspoengRequest" type="ns0:GBOPersonOpptjeningsgrunnlagListe" wpc:id="204"/>
    <bpws:variable name="beregnPensjonspoengResponse" type="ns0:GBOPersonOpptjeningsgrunnlagListe" wpc:id="205"/>
    <bpws:variable name="hentOpptjeningsgrunnlagListeRequest" type="ns0:GBOHentOpptjeningsgrunnlagListeRequest" wpc:id="208"/>
    <bpws:variable name="opptjeningsGrunnlag" type="ns0:GBOOpptjeningGrunnlag" wpc:id="209"/>
    <bpws:variable name="opptjening" type="ns0:GBOOpptjening" wpc:id="212"/>
    <bpws:variable name="lagreOpptjeningRequest" type="ns0:GBOOpptjeningGrunnlag" wpc:id="214"/>
    <bpws:variable name="lagreOpptjeningResponse" type="ns0:GBOOpptjeningGrunnlag" wpc:id="215"/>
    <bpws:variable name="opprettOpptjeningRequest" type="ns0:GBOOpptjeningGrunnlag" wpc:id="234"/>
    <bpws:variable name="hentOmsorgOverfGrunnlagRequest" type="ns0:GBOHentOmsorgOverfGrunnlagRequest" wpc:id="235"/>
    <bpws:variable name="omsorgOverfGrunnlag" type="ns0:GBOOmsorgOverfGrunnlagListe" wpc:id="236"/>
    <bpws:variable name="opprettOpptjeningResponse" type="ns0:GBOOpptjeningGrunnlag" wpc:id="238"/>
    <bpws:variable name="slettOpptjeningRequest" type="ns0:GBOOpptjeningGrunnlag" wpc:id="246"/>
    <bpws:variable name="opprettVedtakSamordningReq" type="ns5:GBOOpprettVedtakSamordningRequest" wpc:id="248"/>
    <bpws:variable name="hentFullmaktListeRequest" type="ns21:GBOHentFullmaktListeRequest" wpc:id="258"/>
    <bpws:variable name="fullmaktListe" type="ns21:GBOFullmaktListe" wpc:id="259"/>
    <bpws:variable name="fullmaktshaver" type="xsd:string" wpc:id="261"/>
    <bpws:variable name="hentBatchBrevdataMottakerRequest" type="ns0:GBOHentBatchBrevdata" wpc:id="303"/>
    <bpws:variable name="hentBatchBrevdataMottakerResponse" type="ns0:GBOBatchBrevdata" wpc:id="304"/>
    <bpws:variable name="bestillbrevMottakerRequest" type="ns11:GBOBrevbestillingRequest" wpc:id="305"/>
    <bpws:variable name="bestillbrevMottakerResponse" type="xsd:string" wpc:id="306"/>
    <bpws:variable name="opprettKontrollpunktRequest" type="ns0:GBOKontrollpunkt" wpc:id="350"/>
    <bpws:variable name="opprettKontrollpunktResponse" type="ns0:GBOKontrollpunkt" wpc:id="351"/>
    <bpws:variable name="isIverksattVedtakIKonflikt" type="xsd:boolean" wpc:id="361"/>
    <bpws:variable name="isToFolketrygdPensjonerKanIkkeLopeSamtidig" type="xsd:boolean" wpc:id="362"/>
    <bpws:variable name="lagreKravhodeRequest" type="ns0:GBOKravhode" wpc:id="383"/>
    <bpws:variable name="lagreKravhodeResponse" type="ns0:GBOKravhode" wpc:id="384"/>
    <bpws:variable name="lagreVedtakRequest" type="ns0:GBOVedtak" wpc:id="394"/>
    <bpws:variable name="opprettOppgaveRequest" type="ns13:GBOOppgave" wpc:id="403"/>
    <bpws:variable name="opprettOppgaveResponse" type="ns13:GBOOppgave" wpc:id="404"/>
    <bpws:variable name="oppdaterPoppVedIverksettelseRequest" type="ns0:GBOOppdaterPoppVedIverksettelseRequest" wpc:id="409"/>
    <bpws:variable name="oppdaterPoppVedIverksettelseResponse" type="xsd:string" wpc:id="410"/>
    <bpws:variable name="hentPensjonssakListeRequest" type="ns0:GBOHentPensjonssakListeRequest" wpc:id="463"/>
    <bpws:variable name="hentPensjonssakListeResponse" type="ns0:GBOPensjonssakListe" wpc:id="464"/>
    <bpws:variable name="omsorgsSakMottaker" type="ns0:GBOPensjonssak" wpc:id="466"/>
    <bpws:variable name="opprettSakRequest" type="ns0:GBOOpprettsakRequest" wpc:id="472"/>
    <bpws:variable name="opprettSakResponse" type="ns0:GBOPensjonssak" wpc:id="473"/>
    <bpws:variable name="hentFullmaktListeMottakerRequest" type="ns21:GBOHentFullmaktListeRequest" wpc:id="484"/>
    <bpws:variable name="hentFullmaktListeMottakerResponse" type="ns21:GBOFullmaktListe" wpc:id="485"/>
    <bpws:variable name="fullmaktshaverMottaker" type="xsd:string" wpc:id="487"/>
    <bpws:variable name="sendVedtakTilOppdrag" type="xsd:boolean" wpc:id="495"/>
    <bpws:variable name="behandleOSKvitteringRequest" type="ns0:GBOBehandleOSKvitteringRequest" wpc:id="511"/>
    <bpws:variable name="behandleOSKvitteringResponse" type="ns0:GBOBehandleOSKvitteringResponse" wpc:id="512"/>
    <bpws:variable name="mottaOSKvitteringRequest" type="ns0:GBOMottaOSKvitteringRequest" wpc:id="513"/>
    <bpws:variable name="positivOSKvitteringMottattRequest" type="ns0:GBOVedtaksId" wpc:id="517"/>
    <bpws:variable name="overforOmsorgsopptjeningListeRequest" type="ns0:GBOOverforOmsorgsopptjeningListeRequest" wpc:id="535"/>
    <bpws:variable name="opptjeningIdListe" type="ns0:GBOOverforOmsorgsopptjeningListeResponse" wpc:id="539"/>
    <bpws:variable name="hentOppgaveListeRequest" type="ns13:GBOHentOppgaveListeRequest" wpc:id="542"/>
    <bpws:variable name="iverksOppgaveListe" type="ns13:GBOOppgaveListe" wpc:id="543"/>
    <bpws:variable name="slettOppgaveListeResponse" type="xsd:string" wpc:id="546"/>
    <bpws:variable name="currentGodskrGrunnlag" type="ns0:GBOOmsorgGodskrGrunnlag" wpc:id="570"/>
    <bpws:variable name="brevkodeAvgiver" type="xsd:string" wpc:id="689"/>
    <bpws:variable name="brevmottakerAvgiver" type="xsd:string" wpc:id="690"/>
    <bpws:variable name="brevkodeMottaker" type="xsd:string" wpc:id="705"/>
    <bpws:variable name="brevmottakerMottaker" type="xsd:string" wpc:id="706"/>
    <bpws:variable name="mottaSamhandlerSvar" type="ns0:GBOVedtaksId" wpc:id="736"/>
  </bpws:variables>
  <bpws:correlationSets>
    <bpws:correlationSet name="SamordningCorrelationSet" properties="ns:vedtaksId"/>
  </bpws:correlationSets>
  <bpws:sequence name="HiddenSequence" wpc:id="1073741828">
    <bpws:receive createInstance="yes" name="MottaIverksettVedtakForespørsel" operation="invokeIverksettVedtak" partnerLink="IverksettVedtak" portType="ns9:IverksettVedtakTest" wpc:displayName="Motta Iverksett Vedtak Forespørsel" wpc:id="5">
      <wpc:output>
        <wpc:parameter name="iverksettVedtakRequest" variable="IverksettVedtakRequest"/>
      </wpc:output>
      <bpws:correlations>
        <bpws:correlation initiate="yes" set="SamordningCorrelationSet"/>
      </bpws:correlations>
    </bpws:receive>
    <bpws:invoke name="SettvedtakIdPaaProsessProperties" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="Sett vedtakId Paa Prosess Properties" wpc:id="398">
      <wpc:script>
        <wpc:javaCode><![CDATA[String vedtakIdProp = getProcessCustomProperty("vedtakId");
if (vedtakIdProp != null )
	setProcessCustomProperty("vedtakId", IverksettVedtakRequest.getString("vedtaksId"));]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:scope name="S100HentVedtak" wpc:displayName="S100 Hent Vedtak" wpc:id="7">
      <bpws:variables>
        <bpws:variable name="hentVedtakRequest" type="ns0:GBOHentVedtakRequest" wpc:id="9"/>
      </bpws:variables>
      <bpws:faultHandlers>
        <bpws:catchAll>
          <bpws:sequence name="HiddenSequence4" wpc:id="1073742091">
            <bpws:invoke name="SettTerminatedSuccessfulOgTerminatedReasonVerdiene1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Sett TerminatedSuccessful Og TerminatedReason Verdiene" wpc:id="268">
              <wpc:script>
                <wpc:javaCode><![CDATA[String terminatedSuccessfulProp = getProcessCustomProperty("terminatedSuccessful");
String terminatedReasonProp = getProcessCustomProperty("terminatedReason");

if (terminatedSuccessfulProp != null )
	setProcessCustomProperty("terminatedSuccessful", "false");
	
if (terminatedReasonProp != null )
	setProcessCustomProperty("terminatedReason", "Vedtak ikke funnet.");	
	
	
]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
            <bpws:terminate name="AvsluttProsess1" wpc:displayName="Avslutt Prosess" wpc:id="269"/>
          </bpws:sequence>
        </bpws:catchAll>
      </bpws:faultHandlers>
      <bpws:sequence name="HiddenSequence1" wpc:id="1073741834">
        <bpws:assign name="OpprettHentVedtakRequest" wpc:displayName="Opprett HentVedtakRequest" wpc:id="8">
          <bpws:copy>
            <bpws:from variable="IverksettVedtakRequest">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/vedtaksId]]></bpws:query>
            </bpws:from>
            <bpws:to variable="hentVedtakRequest">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/vedtakId]]></bpws:query>
            </bpws:to>
          </bpws:copy>
          <bpws:copy>
            <bpws:from><![CDATA[VEDTAK_MED_DYP_STRUKTUR]]></bpws:from>
            <bpws:to variable="hentVedtakRequest">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[tjenestedirektiv/returmengde]]></bpws:query>
            </bpws:to>
          </bpws:copy>
        </bpws:assign>
        <bpws:invoke name="Vedtak.HentVedtak" operation="hentVedtak" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:displayName="4.2 Vedtak.HentVedtak" wpc:id="11" wpc:transactionalBehavior="participates">
          <wpc:input>
            <wpc:parameter name="hentVedtakRequest" variable="hentVedtakRequest"/>
          </wpc:input>
          <wpc:output>
            <wpc:parameter name="hentVedtakResponse" variable="vedtak"/>
          </wpc:output>
        </bpws:invoke>
      </bpws:sequence>
    </bpws:scope>
    <bpws:scope name="S110HentSak" wpc:displayName="S110 Hent Sak" wpc:id="336">
      <bpws:sequence name="HiddenSequence23" wpc:id="1073742161">
        <bpws:assign name="OpprettHentPensjonssakRequest" wpc:displayName="Opprett HentPensjonssakRequest" wpc:id="162">
          <bpws:copy>
            <bpws:from variable="vedtak">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/saksId]]></bpws:query>
            </bpws:from>
            <bpws:to variable="hentPensjonssakRequest">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/saksId]]></bpws:query>
            </bpws:to>
          </bpws:copy>
        </bpws:assign>
        <bpws:invoke name="Pensjonssak.HentPensjonssak" operation="hentPensjonssak" partnerLink="PensjonssakAsyncPartner" portType="ns23:PensjonssakAsync" wpc:displayName="3.1.1 Pensjonssak.HentPensjonssak" wpc:id="163">
          <wpc:input>
            <wpc:parameter name="hentPensjonssakRequest" variable="hentPensjonssakRequest"/>
          </wpc:input>
          <wpc:output>
            <wpc:parameter name="hentPensjonssakResponse" variable="pensjonssak"/>
          </wpc:output>
        </bpws:invoke>
      </bpws:sequence>
    </bpws:scope>
    <bpws:switch name="S120KontrollerVedtaksstatus" wpc:displayName="S120 Kontroller Vedtaksstatus" wpc:id="262">
      <bpws:case wpc:id="340">
        <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[//return vedtak.getString("vedtakstatusKode").equals(KVedtakS.TIL_IVERKSETTELSE);
return true;
]]></bpws:condition>
        <bpws:sequence name="HiddenSequence28" wpc:id="1073742165">
          <bpws:scope name="S130Hentiverksettelsesoppgave" wpc:displayName="S130 Hent iverksettelsesoppgave" wpc:id="342">
            <bpws:sequence name="HiddenSequence29" wpc:id="1073742167">
              <bpws:assign name="OpprettHentOppgaveListeRequest" wpc:displayName="Opprett HentOppgaveListeRequest" wpc:id="540">
                <bpws:copy>
                  <bpws:from><![CDATA[PEN]]></bpws:from>
                  <bpws:to variable="hentOppgaveListeRequest">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[fagomradeKodeListe[1]]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from><![CDATA[IVE]]></bpws:from>
                  <bpws:to variable="hentOppgaveListeRequest">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[oppgavetypeKodeListe[1]]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="pensjonssak">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[saksId]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="hentOppgaveListeRequest">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[sakId]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>false</bpws:from>
                  <bpws:to variable="hentOppgaveListeRequest">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[aktiv]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="Oppgave.HentOppgaveListe" operation="hentOppgaveListe" partnerLink="OppgaveAsyncPartner" portType="ns28:OppgaveAsync" wpc:continueOnError="no" wpc:displayName="12.1 Oppgave.HentOppgaveListe" wpc:id="541" wpc:transactionalBehavior="participates">
                <wpc:input>
                  <wpc:parameter name="hentOppgaveListeRequest" variable="hentOppgaveListeRequest"/>
                </wpc:input>
                <wpc:output>
                  <wpc:parameter name="hentOppgaveListeResponse" variable="iverksOppgaveListe"/>
                </wpc:output>
              </bpws:invoke>
            </bpws:sequence>
          </bpws:scope>
          <bpws:switch name="Finnesiverksettelsesoppgave" wpc:displayName="Finnes iverksettelsesoppgave" wpc:id="786">
            <bpws:case wpc:id="788">
              <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[List oppgaver = iverksOppgaveListe.getList("oppgaver");
return !oppgaver.isEmpty();
]]></bpws:condition>
              <bpws:scope name="S140Slettiverksettelsesoppgave" wpc:displayName="S140 Slett iverksettelsesoppgave" wpc:id="544">
                <bpws:invoke name="Oppgave.SlettOppgaveListe" operation="slettOppgaveListe" partnerLink="OppgaveAsyncPartner" portType="ns28:OppgaveAsync" wpc:continueOnError="no" wpc:displayName="12.1 Oppgave.SlettOppgaveListe" wpc:id="545" wpc:transactionalBehavior="participates">
                  <wpc:input>
                    <wpc:parameter name="slettOppgaveListeRequest" variable="iverksOppgaveListe"/>
                  </wpc:input>
                  <wpc:output>
                    <wpc:parameter name="slettOppgaveListeResponse" variable="slettOppgaveListeResponse"/>
                  </wpc:output>
                </bpws:invoke>
              </bpws:scope>
            </bpws:case>
          </bpws:switch>
          <bpws:scope name="S150Lagreiverksettelsesdato" wpc:displayName="S150 Lagre iverksettelsesdato" wpc:id="547">
            <bpws:sequence name="HiddenSequence27" wpc:id="1073742373">
              <bpws:invoke name="OpprettlagreVedtakRequest" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="Opprett lagreVedtakRequest" wpc:id="548">
                <wpc:script>
                  <wpc:javaCode><![CDATA[lagreVedtakRequest = DataFactory.INSTANCE.create("http://nav-lib-pen/no/nav/lib/pen/gbo", "GBOVedtak");
lagreVedtakRequest.setString("vedtakId", IverksettVedtakRequest.getString("vedtaksId"));
Date idag = Calendar.getInstance().getTime();
String dagensDato = DateUtil.formatWIDString(idag);
lagreVedtakRequest.setString("tilIverksettelseDato", dagensDato);
]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="Vedtak.LagreVedtak" operation="lagreVedtak" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.LagreVedtak" wpc:id="550">
                <wpc:input>
                  <wpc:parameter name="lagreVedtakRequest" variable="lagreVedtakRequest"/>
                </wpc:input>
                <wpc:output/>
              </bpws:invoke>
            </bpws:sequence>
          </bpws:scope>
          <bpws:switch name="S160Sjekkvedtakstype" wpc:displayName="S160 Sjekk vedtakstype" wpc:id="551">
            <bpws:case wpc:id="552">
              <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[String vedtaksType = vedtak.getString("vedtaksKode");
if (vedtaksType.equals(KVedtakT.OPPTJENING)) {
	return true;
} else {
	return false;
}]]></bpws:condition>
              <bpws:sequence name="HiddenSequence2" wpc:id="1073742614">
                <bpws:invoke name="Snippet" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="Snippet" wpc:id="791">
                  <wpc:script>
                    <wpc:javaCode><![CDATA[String terminatedSuccessfulProp = getProcessCustomProperty("terminatedSuccessful");
String terminatedReasonProp = getProcessCustomProperty("terminatedReason");
String vedtakstatusKode = vedtak.getString("vedtakstatusKode");

if (terminatedSuccessfulProp != null )
	setProcessCustomProperty("terminatedSuccessful", "false");
	
if (terminatedReasonProp != null )
	setProcessCustomProperty("terminatedReason", "Opptjeningsvedtak. Terminerer prosess.");	]]></wpc:javaCode>
                  </wpc:script>
                </bpws:invoke>
                <bpws:terminate name="Avsluttprosess2" wpc:displayName="Avslutt prosess" wpc:id="789"/>
              </bpws:sequence>
            </bpws:case>
            <bpws:otherwise>
              <bpws:sequence name="HiddenSequence86" wpc:id="1073742480">
                <bpws:switch name="S470Erbrevkodelagretpavedtaket" wpc:displayName="S470 Er brevkode lagret pa vedtaket" wpc:id="619">
                  <bpws:case wpc:id="621">
                    <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[List autoBrevListe = vedtak.getList("autoBrevListe");

if(autoBrevListe.size() == 0)
	return true;
else
	return false;
]]></bpws:condition>
                    <bpws:empty name="Ingenhandling11" wpc:displayName="Ingen handling" wpc:id="655"/>
                  </bpws:case>
                  <bpws:case wpc:id="622">
                    <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[List autoBrevListe = vedtak.getList("autoBrevListe");

if(autoBrevListe.size() == 1)
	return true;
else
	return false;
]]></bpws:condition>
                    <bpws:sequence name="HiddenSequence85" wpc:id="1073742481">
                      <bpws:scope name="S500Hentbrevdata" wpc:displayName="S500 Hent brevdata" wpc:id="658">
                        <bpws:sequence name="HiddenSequence6" wpc:id="1073742515">
                          <bpws:assign name="OppretthentBatchbrevdataRequest" wpc:displayName="Opprett hentBatchbrevdataRequest" wpc:id="692">
                            <bpws:copy>
                              <bpws:from variable="vedtak">
                                <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[autoBrevListe[1]/internBatchbrevKode]]></bpws:query>
                              </bpws:from>
                              <bpws:to variable="hentBatchBrevDataRequest">
                                <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[internBatchbrevkode]]></bpws:query>
                              </bpws:to>
                            </bpws:copy>
                          </bpws:assign>
                          <bpws:invoke name="Pensjonssak.HentBatchbrevdata" operation="hentBatchBrevdata" partnerLink="PensjonssakAsyncPartner" portType="ns23:PensjonssakAsync" wpc:continueOnError="no" wpc:displayName="3.1.1 Pensjonssak.HentBatchbrevdata" wpc:id="693" wpc:transactionalBehavior="participates">
                            <wpc:input>
                              <wpc:parameter name="hentBatchBrevdataRequest" variable="hentBatchBrevDataRequest"/>
                            </wpc:input>
                            <wpc:output>
                              <wpc:parameter name="hentBatchBrevdataResponse" variable="batchBrevData"/>
                            </wpc:output>
                          </bpws:invoke>
                        </bpws:sequence>
                      </bpws:scope>
                      <bpws:scope name="S510Generervedtaksbrev" wpc:displayName="S510 Generer vedtaksbrev" wpc:id="659">
                        <bpws:faultHandlers>
                          <bpws:catch faultMessageType="ns20:bestillBrev_faultAdresseIkkeRegistrertMsg" faultName="ns20:faultAdresseIkkeRegistrert" faultVariable="faultAdresseIkkeRegistrert" wpc:variableId="697">
                            <bpws:sequence name="HiddenSequence8" wpc:id="1073742522">
                              <bpws:invoke name="OpprettOpprettOppgaveRequest1" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="Opprett OpprettOppgaveRequest" wpc:id="699">
                                <wpc:script>
                                  <wpc:javaCode><![CDATA[DataObject fullstendigKravhode = vedtak.getDataObject("kravHode");

opprettOppgaveRequest = DataFactory.INSTANCE.create("http://nav-lib-sak/no/nav/lib/sak/gbo", "GBOOppgave");

// oppretter "aktiv fra" dato verdi
Calendar aktivFra = Calendar.getInstance();
opprettOppgaveRequest.set("aktivFra", DateUtil.formatWIDString(aktivFra.getTime()));

// oppretter "aktiv til" dato verdi
Calendar aktivTil = aktivFra; 
aktivTil.add(Calendar.DATE, KOppgaveT.GEN_PEN_ANTALL_FRIST_DAGER);

DataObject eierTilgang = pensjonssak.getDataObject("eierTilgang");

DataObject bruker = DataFactory.INSTANCE.create("http://nav-lib-sak/no/nav/lib/sak/gbo", "GBOBruker");
bruker.set("brukerId", pensjonssak.getString("fnr"));
opprettOppgaveRequest.set("gjelder", bruker);

opprettOppgaveRequest.set("aktivFra", DateUtil.formatWIDString(aktivFra.getTime()));
opprettOppgaveRequest.set("aktivTil", DateUtil.formatWIDString(aktivTil.getTime()));
opprettOppgaveRequest.set("ansvarligEnhetId", eierTilgang.getString("enhetId"));
opprettOppgaveRequest.set("opprettetEnhetId", TeksterOgFasteVerdier.OPPG_HOYVOL_BATCH_ENHETSID);
opprettOppgaveRequest.set("opprettetEnhetNavn", TeksterOgFasteVerdier.OPPG_HOYVOL_BATCH_ENHETSNAVN);
opprettOppgaveRequest.set("fagomrade", KFagomradeT.PENSJON);
opprettOppgaveRequest.set("underkategori", KUnderkategoriT.getUnderkategoriFromSakstype(pensjonssak.getString("saksTypeKode")));
opprettOppgaveRequest.set("oppgaveType", KOppgaveT.GENERELL_PEN);
opprettOppgaveRequest.set("beskrivelse", TeksterOgFasteVerdier.OPPG_BREV_FEILET_VEDTAK_YTELSE);
opprettOppgaveRequest.set("kravId", fullstendigKravhode.getString("kravId"));
opprettOppgaveRequest.set("prioritet", "LAV");
opprettOppgaveRequest.set("saksnummer", pensjonssak.get("saksId"));
]]></wpc:javaCode>
                                </wpc:script>
                              </bpws:invoke>
                              <bpws:invoke name="Oppgave.OpprettOppgave" operation="opprettOppgave" partnerLink="OppgaveAsyncPartner" portType="ns28:OppgaveAsync" wpc:continueOnError="no" wpc:displayName="12.1 Oppgave.OpprettOppgave" wpc:id="700">
                                <wpc:input>
                                  <wpc:parameter name="opprettOppgaveRequest" variable="opprettOppgaveRequest"/>
                                </wpc:input>
                                <wpc:output>
                                  <wpc:parameter name="opprettOppgaveResponse" variable="opprettOppgaveResponse"/>
                                </wpc:output>
                              </bpws:invoke>
                            </bpws:sequence>
                          </bpws:catch>
                        </bpws:faultHandlers>
                        <bpws:sequence name="HiddenSequence7" wpc:id="1073742518">
                          <bpws:invoke name="OpprettbestillBrevRequest" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="Opprett bestillBrevRequest" wpc:id="695">
                            <wpc:script>
                              <wpc:javaCode><![CDATA[bestillBrevRequest = DataFactory.INSTANCE.create("http://nav-lib-sah/no/nav/lib/sah/gbo", "GBOBrevbestillingRequest");
List autoBrevListe = vedtak.getList("autoBrevListe");
DataObject autoBrev = (DataObject) autoBrevListe.get(0);

bestillBrevRequest.set("brevKode", batchBrevData.get("brevkode"));
bestillBrevRequest.set("brevGruppe", batchBrevData.get("brevGruppe"));
bestillBrevRequest.set("redigerbart", batchBrevData.get("redigerbart"));
bestillBrevRequest.set("vedtaksInformasjon", vedtak.get("vedtakId"));

DataObject saksKontekst = DataFactory.INSTANCE.create("http://nav-lib-sah/no/nav/lib/sah/gbo", "GBOSakskontekst");
saksKontekst.set("saksid", pensjonssak.get("saksId"));
saksKontekst.set("saksbehandlernavn", TeksterOgFasteVerdier.JOARK_SAKSB_NAVN_PROSESS);
saksKontekst.set("fagsystem", batchBrevData.get("fagsystem"));
saksKontekst.set("fagomradeKode", KFagomradeT.PENSJON);
saksKontekst.set("dokumenttype", batchBrevData.get("dokumentType"));
saksKontekst.set("innhold", batchBrevData.get("innhold"));
saksKontekst.set("kategori", batchBrevData.get("kategori"));
saksKontekst.set("sensitivitetsgrad", batchBrevData.get("sensitivt"));
saksKontekst.set("tillattelektroniskvarsling", batchBrevData.get("elektroniskDistribusjon"));
saksKontekst.set("journalenhet", ((DataObject)pensjonssak.get("eierTilgang")).get("enhetId"));
saksKontekst.set("dokumentdato", DateUtil.formatWIDString(Calendar.getInstance().getTime()));
saksKontekst.set("gjelder", pensjonssak.get("fnr"));
saksKontekst.set("mottaker", autoBrev.get("brevMottaker"));


bestillBrevRequest.set("sakskontekst", saksKontekst );]]></wpc:javaCode>
                            </wpc:script>
                          </bpws:invoke>
                          <bpws:invoke name="PJOARK030.BestillBrev2" operation="bestillBrev" partnerLink="BrevbestillingAsyncPartner" portType="ns20:BrevbestillingAsync" wpc:continueOnError="no" wpc:displayName="PJOARK030.BestillBrev" wpc:id="696" wpc:transactionalBehavior="participates">
                            <wpc:input>
                              <wpc:parameter name="bestillBrevRequest" variable="bestillBrevRequest"/>
                            </wpc:input>
                            <wpc:output>
                              <wpc:parameter name="bestillBrevResponse" variable="bestillBrevResponse"/>
                            </wpc:output>
                          </bpws:invoke>
                        </bpws:sequence>
                      </bpws:scope>
                    </bpws:sequence>
                  </bpws:case>
                  <bpws:otherwise>
                    <bpws:sequence name="HiddenSequence84" wpc:id="1073742477">
                      <bpws:invoke name="S480Setttermineringsmelding" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="S480 Sett termineringsmelding" wpc:id="620">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[String terminatedSuccessfulProp = getProcessCustomProperty("terminatedSuccessful");
String terminatedReasonProp = getProcessCustomProperty("terminatedReason");
String vedtakstatusKode = vedtak.getString("vedtakstatusKode");

if (terminatedSuccessfulProp != null )
	setProcessCustomProperty("terminatedSuccessful", "false");
	
if (terminatedReasonProp != null )
	setProcessCustomProperty("terminatedReason", "Prosessen ble kalt med flere brevkoder lagret på vedtaket, når kun ett vedtaksbrev skulle sendes. Terminerer prosess.");	]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                      <bpws:terminate name="Avsluttprosess4" wpc:displayName="Avslutt prosess" wpc:id="654"/>
                    </bpws:sequence>
                  </bpws:otherwise>
                </bpws:switch>
                <bpws:switch name="S535Ervedtaketetavslag" wpc:displayName="S535 Er vedtaket et avslag" wpc:id="660">
                  <bpws:case wpc:id="682">
                    <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[String vedtaksKode = vedtak.getString("vedtaksKode");

if(KVedtakT.AVSLAG.equals(vedtaksKode)) {
	return true;
}

return false;
]]></bpws:condition>
                    <bpws:scope name="S536Oppdaterevedtaksstatus" wpc:displayName="S536 Oppdatere vedtaksstatus" wpc:id="683">
                      <bpws:sequence name="HiddenSequence14" wpc:id="1073742544">
                        <bpws:assign name="OpprettlagreVedtakStatus" wpc:displayName="Opprett lagreVedtakStatus" wpc:id="721">
                          <bpws:copy>
                            <bpws:from variable="vedtak">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="lagreVedtakStatusRequest">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from><![CDATA[IVERKS]]></bpws:from>
                            <bpws:to variable="lagreVedtakStatusRequest">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakStatusKode]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="Vedtak.LagreVedtakStatus2" operation="lagreVedtakStatus" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.LagreVedtakStatus" wpc:id="722">
                          <wpc:input>
                            <wpc:parameter name="lagreVedtakStatusRequest" variable="lagreVedtakStatusRequest"/>
                          </wpc:input>
                          <wpc:output/>
                        </bpws:invoke>
                      </bpws:sequence>
                    </bpws:scope>
                  </bpws:case>
                  <bpws:otherwise>
                    <bpws:sequence name="HiddenSequence88" wpc:id="1073742485">
                      <bpws:switch name="S540KontrollereforsakstypeKrigellergammelyrkesskade" wpc:displayName="S540 Kontrollere for sakstype Krig eller gammel yrkesskade" wpc:id="662">
                        <bpws:case wpc:id="664">
                          <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[String saksType = vedtak.getString("saksKode");

if(saksType.equals(KSakT.KRIGSPENSJON) || saksType.equals(KSakT.GAMMEL_YRKESSKADE)) {
	return false; 
} else {
	return true;
}]]></bpws:condition>
                          <bpws:sequence name="HiddenSequence87" wpc:id="1073742489">
                            <bpws:scope name="S550Oppdaterevedtakstatusforsamordning" wpc:displayName="S550 Oppdatere vedtakstatus for samordning" wpc:id="723">
                              <bpws:sequence name="HiddenSequence15" wpc:id="1073742548">
                                <bpws:assign name="OpprettlagreVedtakStatusRequest2" wpc:displayName="Opprett lagreVedtakStatusRequest" wpc:id="725">
                                  <bpws:copy>
                                    <bpws:from variable="vedtak">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                    </bpws:from>
                                    <bpws:to variable="lagreVedtakStatusRequest">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                  <bpws:copy>
                                    <bpws:from><![CDATA[TIL_SAMORDN]]></bpws:from>
                                    <bpws:to variable="lagreVedtakStatusRequest">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakStatusKode]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                </bpws:assign>
                                <bpws:invoke name="Vedtak.LagreVedtakstatus3" operation="lagreVedtakStatus" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.LagreVedtakstatus" wpc:id="726" wpc:transactionalBehavior="participates">
                                  <wpc:input>
                                    <wpc:parameter name="lagreVedtakStatusRequest" variable="lagreVedtakStatusRequest"/>
                                  </wpc:input>
                                  <wpc:output/>
                                </bpws:invoke>
                              </bpws:sequence>
                            </bpws:scope>
                            <bpws:scope name="S560Samordneytelse1" wpc:displayName="S560 Samordne ytelse" wpc:id="727">
                              <bpws:sequence name="HiddenSequence16" wpc:id="1073742552">
                                <bpws:assign name="OpprettOpprettVedtakSamordningRequest" wpc:displayName="Opprett OpprettVedtakSamordningRequest" wpc:id="729">
                                  <bpws:copy>
                                    <bpws:from variable="vedtak">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[gjelderFnr]]></bpws:query>
                                    </bpws:from>
                                    <bpws:to variable="opprettVedtakSamordningReq">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[fnr]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                  <bpws:copy>
                                    <bpws:from variable="vedtak">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                    </bpws:from>
                                    <bpws:to variable="opprettVedtakSamordningReq">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                  <bpws:copy>
                                    <bpws:from variable="vedtak">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[virkningFom]]></bpws:query>
                                    </bpws:from>
                                    <bpws:to variable="opprettVedtakSamordningReq">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[iverksattFom]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                  <bpws:copy>
                                    <bpws:from variable="vedtak">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[virkningTom]]></bpws:query>
                                    </bpws:from>
                                    <bpws:to variable="opprettVedtakSamordningReq">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[iverksattTom]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                </bpws:assign>
                                <bpws:invoke name="Samordning.OpprettVedtakSamordning" operation="opprettVedtakSamordning" partnerLink="SamordningAsyncPartner" portType="ns19:SamordningAsync" wpc:continueOnError="no" wpc:displayName="1.3 Samordning.OpprettVedtakSamordning" wpc:id="730">
                                  <wpc:input>
                                    <wpc:parameter name="opprettVedtakSamordningRequest" variable="opprettVedtakSamordningReq"/>
                                  </wpc:input>
                                  <wpc:output/>
                                </bpws:invoke>
                              </bpws:sequence>
                            </bpws:scope>
                            <bpws:scope name="S570Mottasvarfrasamordning" wpc:displayName="S570 Motta svar fra samordning" wpc:id="668">
                              <bpws:eventHandlers>
                                <bpws:onEvent operation="mottaSamhandlerSvar" partnerLink="IverksettVedtak" portType="ns9:IverksettVedtakTest">
                                  <wpc:output>
                                    <wpc:parameter name="mottaSamhandler" type="ns0:GBOVedtaksId" variable="samhandlerSvar" wpc:variableId="737" wpc:variableIsBusinessRelevant="no"/>
                                  </wpc:output>
                                  <bpws:correlations>
                                    <bpws:correlation initiate="no" set="SamordningCorrelationSet"/>
                                  </bpws:correlations>
                                  <bpws:sequence name="HiddenSequence17" wpc:id="1073742557">
                                    <bpws:assign name="OpprettSamordningFerdigRequest" wpc:displayName="Opprett SamordningFerdigRequest" wpc:id="734">
                                      <bpws:copy>
                                        <bpws:from variable="samhandlerSvar">
                                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtaksId]]></bpws:query>
                                        </bpws:from>
                                        <bpws:to variable="samordningFerdig">
                                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtaksId]]></bpws:query>
                                        </bpws:to>
                                      </bpws:copy>
                                    </bpws:assign>
                                    <bpws:invoke name="KallsamordningFerdig" operation="samordningFerdig" partnerLink="IverksettVedtakPartner" portType="ns9:IverksettVedtakTest" wpc:continueOnError="no" wpc:displayName="Kall samordningFerdig" wpc:id="735">
                                      <wpc:input>
                                        <wpc:parameter name="samordningFerdig" variable="samordningFerdig"/>
                                      </wpc:input>
                                    </bpws:invoke>
                                  </bpws:sequence>
                                </bpws:onEvent>
                              </bpws:eventHandlers>
                              <bpws:receive name="Ventpaasvarfrasamordning" operation="samordningFerdig" partnerLink="IverksettVedtak" portType="ns9:IverksettVedtakTest" wpc:displayName="Vent paa svar fra samordning" wpc:id="731">
                                <wpc:output>
                                  <wpc:parameter name="samordningFerdig" variable="samordningFerdig"/>
                                </wpc:output>
                                <bpws:correlations>
                                  <bpws:correlation initiate="no" set="SamordningCorrelationSet"/>
                                </bpws:correlations>
                              </bpws:receive>
                            </bpws:scope>
                            <bpws:scope name="S580Oppdaterevedtakstatusettersamordning" wpc:displayName="S580 Oppdatere vedtakstatus etter samordning" wpc:id="669">
                              <bpws:sequence name="HiddenSequence18" wpc:id="1073742562">
                                <bpws:assign name="OpprettLagreVedtakStatusRequest3" wpc:displayName="Opprett LagreVedtakStatusRequest" wpc:id="739">
                                  <bpws:copy>
                                    <bpws:from variable="vedtak">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                    </bpws:from>
                                    <bpws:to variable="lagreVedtakStatusRequest">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                  <bpws:copy>
                                    <bpws:from><![CDATA[SAMORDN]]></bpws:from>
                                    <bpws:to variable="lagreVedtakStatusRequest">
                                      <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakStatusKode]]></bpws:query>
                                    </bpws:to>
                                  </bpws:copy>
                                </bpws:assign>
                                <bpws:invoke name="Vedtak.LagreVedtakStatus4" operation="lagreVedtakStatus" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.LagreVedtakStatus" wpc:id="740" wpc:transactionalBehavior="participates">
                                  <wpc:input>
                                    <wpc:parameter name="lagreVedtakStatusRequest" variable="lagreVedtakStatusRequest"/>
                                  </wpc:input>
                                  <wpc:output/>
                                </bpws:invoke>
                              </bpws:sequence>
                            </bpws:scope>
                          </bpws:sequence>
                        </bpws:case>
                        <bpws:otherwise>
                          <bpws:empty name="Ingenhandling12" wpc:displayName="Ingen handling" wpc:id="663"/>
                        </bpws:otherwise>
                      </bpws:switch>
                      <bpws:switch name="S580Erdetenforstegangsbehandling" wpc:displayName="S580 Er det en forstegangsbehandling" wpc:id="670">
                        <bpws:case wpc:id="680">
                          <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[String vedtaksKode = vedtak.getString("vedtaksKode");

/*if(KVedtakT.FORSTEGANG.equals(vedtaksKode)) {
	return true;
} else {
	return false;
}*/
return true;]]></bpws:condition>
                          <bpws:empty name="Ingenhandling13" wpc:displayName="Ingen handling" wpc:id="681"/>
                        </bpws:case>
                        <bpws:otherwise>
                          <bpws:switch name="S600Ervirkningsdatofor2009-01-01" wpc:displayName="S600 Er virkningsdato for 2009-01-01" wpc:id="672">
                            <bpws:case wpc:id="674">
                              <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[String vedtaksdato = vedtak.getString("virkningFom");
Date dato =  DateUtil.parseWIDString(vedtaksdato);
return dato.before(DateUtil.parseInputString("01.01.2009", true));
]]></bpws:condition>
                              <bpws:scope name="S610Opprettstoppoppgavetilokonomienheten" wpc:displayName="S610 Opprett stoppoppgave til okonomienheten" wpc:id="675">
                                <bpws:sequence name="HiddenSequence19" wpc:id="1073742565">
                                  <bpws:invoke name="OpprettOpprettOppgaveRequest4" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="no" wpc:displayName="Opprett OpprettOppgaveRequest" wpc:id="742">
                                    <wpc:script>
                                      <wpc:javaCode><![CDATA[oppgave = DataFactory.INSTANCE.create("http://nav-lib-sak/no/nav/lib/sak/gbo", "GBOOppgave");
Calendar c = Calendar.getInstance();
c.add(Calendar.DATE, KOppgaveT.AUTOMATISK_KONTROLL_PEN_ANTALL_FRIST_DAGER); 

DataObject bruker = DataFactory.INSTANCE.create("http://nav-lib-sak/no/nav/lib/sak/gbo", "GBOBruker");
bruker.set("brukerId", vedtak.get("gjelderFnr"));
oppgave.set("gjelder", bruker);

oppgave.set("aktivFra", DateUtil.formatWIDString(Calendar.getInstance().getTime()));
oppgave.set("aktivTil", DateUtil.formatWIDString(c.getTime()));
oppgave.set("ansvarligEnhetId", TeksterOgFasteVerdier.NAVENHET_HARS_ID);
oppgave.set("ansvarligEnhetNavn", TeksterOgFasteVerdier.NAVENHET_HARS_NAVN);
oppgave.set("opprettetEnhetId", TeksterOgFasteVerdier.OPPG_HOYVOL_BATCH_ENHETSID );
oppgave.set("opprettetEnhetNavn", TeksterOgFasteVerdier.OPPG_HOYVOL_BATCH_ENHETSNAVN );
oppgave.set("fagomrade", KFagomrade.OKONOMI);
oppgave.set("oppgaveType", KOppgaveT.STOPP_OKO);
oppgave.set("beskrivelse", TeksterOgFasteVerdier.OPPG_STOPP_OPPDRAG);
String underkategori = KUnderkategoriT.getUnderkategoriFromSakstypeAndFagomrade(pensjonssak.getString("saksTypeKode"),KFagomrade.OKONOMI);
oppgave.set("underkategori", underkategori);
DataObject kravhode = vedtak.getDataObject("kravHode");
oppgave.set("kravId", kravhode.get("kravId"));
oppgave.set("prioritet", "Ikke prioritet"); 
oppgave.set("saksnummer", pensjonssak.get("saksId"));
]]></wpc:javaCode>
                                    </wpc:script>
                                  </bpws:invoke>
                                  <bpws:invoke name="Oppgave.OpprettOppgave4" operation="opprettOppgave" partnerLink="OppgaveAsyncPartner" portType="ns28:OppgaveAsync" wpc:continueOnError="no" wpc:displayName="12.1 Oppgave.OpprettOppgave" wpc:id="743">
                                    <wpc:input>
                                      <wpc:parameter name="opprettOppgaveRequest" variable="oppgave"/>
                                    </wpc:input>
                                    <wpc:output>
                                      <wpc:parameter name="opprettOppgaveResponse" variable="oppgave"/>
                                    </wpc:output>
                                  </bpws:invoke>
                                </bpws:sequence>
                              </bpws:scope>
                            </bpws:case>
                            <bpws:otherwise>
                              <bpws:empty name="Ingenhandling14" wpc:displayName="Ingen handling" wpc:id="673"/>
                            </bpws:otherwise>
                          </bpws:switch>
                        </bpws:otherwise>
                      </bpws:switch>
                      <bpws:scope name="S620Hentuttrekktiloppdragstransaksjon" wpc:displayName="S620 Hent uttrekk til oppdragstransaksjon" wpc:id="676">
                        <bpws:sequence name="HiddenSequence20" wpc:id="1073742568">
                          <bpws:assign name="OpprettHentUttrekkTilOppdragstransaksjonRequest" wpc:displayName="Opprett HentUttrekkTilOppdragstransaksjonRequest" wpc:id="745">
                            <bpws:copy>
                              <bpws:from variable="vedtak">
                                <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                              </bpws:from>
                              <bpws:to variable="hentUttrekkTilOppdragstransaksjonRequest">
                                <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtaksId]]></bpws:query>
                              </bpws:to>
                            </bpws:copy>
                            <bpws:copy>
                              <bpws:from><![CDATA[oppdat]]></bpws:from>
                              <bpws:to variable="hentUttrekkTilOppdragstransaksjonRequest">
                                <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[aksjonsKode]]></bpws:query>
                              </bpws:to>
                            </bpws:copy>
                          </bpws:assign>
                          <bpws:invoke name="Vedtak.HentUttrekkTilOpppdragstransaksjon" operation="hentUttrekkTilOppdragstransaksjon" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.HentUttrekkTilOpppdragstransaksjon" wpc:id="746">
                            <wpc:input>
                              <wpc:parameter name="hentUttrekkTilOppdragstransaksjonRequest" variable="hentUttrekkTilOppdragstransaksjonRequest"/>
                            </wpc:input>
                            <wpc:output>
                              <wpc:parameter name="hentUttrekkTilOppdragstransaksjonResponse" variable="hentUttrekkTilOppdragstransaksjonResponse"/>
                            </wpc:output>
                          </bpws:invoke>
                        </bpws:sequence>
                      </bpws:scope>
                      <bpws:switch name="S650Bledetreturnertentomoppdragsmelding" wpc:displayName="S650 Ble det returnert en tom oppdragsmelding" wpc:id="677">
                        <bpws:case wpc:id="678">
                          <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[DataObject oppdragsmelding = hentUttrekkTilOppdragstransaksjonResponse.getDataObject("oppdragsmelding");
if(oppdragsmelding==null)
	return true;
else
	return false;
]]></bpws:condition>
                          <bpws:scope name="S660Oppdatervedtakstatustiliverksatt" wpc:displayName="S660 Oppdater vedtakstatus til iverksatt" wpc:id="679">
                            <bpws:sequence name="HiddenSequence21" wpc:id="1073742571">
                              <bpws:assign name="OpprettlagreVedtakstatusRequest4" wpc:displayName="Opprett lagreVedtakstatusRequest" wpc:id="748">
                                <bpws:copy>
                                  <bpws:from variable="vedtak">
                                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                  </bpws:from>
                                  <bpws:to variable="lagreVedtakStatusRequest">
                                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakId]]></bpws:query>
                                  </bpws:to>
                                </bpws:copy>
                                <bpws:copy>
                                  <bpws:from><![CDATA[IVERKS]]></bpws:from>
                                  <bpws:to variable="lagreVedtakStatusRequest">
                                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtakStatusKode]]></bpws:query>
                                  </bpws:to>
                                </bpws:copy>
                              </bpws:assign>
                              <bpws:invoke name="Vedtak.LagreVedtakstatus5" operation="lagreVedtakStatus" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.LagreVedtakstatus" wpc:id="749">
                                <wpc:input>
                                  <wpc:parameter name="lagreVedtakStatusRequest" variable="lagreVedtakStatusRequest"/>
                                </wpc:input>
                                <wpc:output/>
                              </bpws:invoke>
                            </bpws:sequence>
                          </bpws:scope>
                        </bpws:case>
                        <bpws:otherwise>
                          <bpws:assign name="SendtilOS1" wpc:displayName="Send til OS" wpc:id="772">
                            <bpws:copy>
                              <bpws:from>false</bpws:from>
                              <bpws:to variable="sendVedtakTilOppdrag"/>
                            </bpws:copy>
                          </bpws:assign>
                        </bpws:otherwise>
                      </bpws:switch>
                    </bpws:sequence>
                  </bpws:otherwise>
                </bpws:switch>
              </bpws:sequence>
            </bpws:otherwise>
          </bpws:switch>
        </bpws:sequence>
      </bpws:case>
      <bpws:otherwise>
        <bpws:sequence name="HiddenSequence3" wpc:id="1073742162">
          <bpws:invoke name="SettTerminatedSuccessfulOgTerminatedReasonVerdiene" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Sett TerminatedSuccessful Og TerminatedReason Verdiene" wpc:id="266">
            <wpc:description>Brukes i forbindelse med transaksjonshåndtering for PPEN409</wpc:description>
            <wpc:script>
              <wpc:javaCode><![CDATA[String terminatedSuccessfulProp = getProcessCustomProperty("terminatedSuccessful");
String terminatedReasonProp = getProcessCustomProperty("terminatedReason");
String vedtakstatusKode = vedtak.getString("vedtakstatusKode");

if (terminatedSuccessfulProp != null )
	setProcessCustomProperty("terminatedSuccessful", "false");
	
if (terminatedReasonProp != null )
	setProcessCustomProperty("terminatedReason", "Prosessen ble kalt med et vedtak med ugyldig vedtakstatus. Terminerer prosess.");	
	
	
]]></wpc:javaCode>
            </wpc:script>
          </bpws:invoke>
          <bpws:terminate name="AvsluttProsess" wpc:displayName="Avslutt Prosess" wpc:id="264"/>
        </bpws:sequence>
      </bpws:otherwise>
    </bpws:switch>
    <bpws:switch name="SendtilOS" wpc:displayName="Send til OS" wpc:id="768">
      <bpws:case wpc:id="770">
        <bpws:condition expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/"><![CDATA[// true = vente, false = gå videre og avslutt
return sendVedtakTilOppdrag != null && sendVedtakTilOppdrag == true;]]></bpws:condition>
        <bpws:sequence name="HiddenSequence24" wpc:id="1073742595">
          <bpws:scope name="S670SendtilOS" wpc:displayName="S670 Send til OS" wpc:id="750">
            <bpws:sequence name="HiddenSequence22" wpc:id="1073742575">
              <bpws:assign name="OpprettSendAsynkronOppdragsmeldingListeRequest" wpc:displayName="Opprett SendAsynkronOppdragsmeldingListeRequest" wpc:id="752">
                <bpws:copy>
                  <bpws:from variable="hentUttrekkTilOppdragstransaksjonResponse">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[oppdragsmelding/oppdrag]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="sendAsynkronOppdragsmeldingListeRequest"/>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="Oppdrag.SendAsynkronOppdragmeldingListe" operation="sendAsynkronOppdragsmeldingProsessOnline" partnerLink="OppdragOnlineAsyncPartner" portType="ns29:OppdragOnlineAsync" wpc:continueOnError="no" wpc:displayName="5.1 Oppdrag.SendAsynkronOppdragmeldingListe" wpc:id="753">
                <wpc:input>
                  <wpc:parameter name="sendAsynkronOppdragsmeldingProsessOnlineRequest" variable="sendAsynkronOppdragsmeldingListeRequest"/>
                </wpc:input>
              </bpws:invoke>
            </bpws:sequence>
          </bpws:scope>
          <bpws:scope name="S680Mottasvarfraoppdrag" wpc:displayName="S680 Motta svar fra oppdrag" wpc:id="754">
            <bpws:eventHandlers>
              <bpws:onEvent operation="mottaOSKvittering" partnerLink="IverksettVedtak" portType="ns9:IverksettVedtakTest">
                <wpc:output>
                  <wpc:parameter name="mottaOSKvitteringRequest" type="ns0:GBOMottaOSKvitteringRequest" variable="mottaOSKvitteringRequest" wpc:variableId="760" wpc:variableIsBusinessRelevant="no"/>
                </wpc:output>
                <bpws:correlations>
                  <bpws:correlation initiate="no" set="SamordningCorrelationSet"/>
                </bpws:correlations>
                <bpws:sequence name="HiddenSequence25" wpc:id="1073742585">
                  <bpws:scope name="S690BehandleOSKvittering" wpc:displayName="S690 Behandle OS Kvittering" wpc:id="756">
                    <bpws:sequence name="HiddenSequence24" wpc:id="1073742581">
                      <bpws:assign name="OpprettBehandleOSKvitteringRequest" wpc:displayName="Opprett BehandleOSKvitteringRequest" wpc:id="758">
                        <bpws:copy>
                          <bpws:from variable="mottaOSKvitteringRequest">
                            <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[osKvittering]]></bpws:query>
                          </bpws:from>
                          <bpws:to variable="behandleOSKvitteringRequest">
                            <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[oppdragsmelding]]></bpws:query>
                          </bpws:to>
                        </bpws:copy>
                      </bpws:assign>
                      <bpws:invoke name="Vedtak.BehandleOSKvittering" operation="behandleOSKvittering" partnerLink="VedtakAsyncPartner" portType="ns25:VedtakAsync" wpc:continueOnError="no" wpc:displayName="4.2 Vedtak.BehandleOSKvittering" wpc:id="759">
                        <wpc:input>
                          <wpc:parameter name="behandleOSKvitteringRequest" variable="behandleOSKvitteringRequest"/>
                        </wpc:input>
                        <wpc:output>
                          <wpc:parameter name="behandleOSKvitteringResponse" variable="behandleOSKvitteringResponse"/>
                        </wpc:output>
                      </bpws:invoke>
                    </bpws:sequence>
                  </bpws:scope>
                  <bpws:assign name="OpprettPositivOSKvitteringMottattRequest" wpc:displayName="Opprett PositivOSKvitteringMottattRequest" wpc:id="764">
                    <bpws:copy>
                      <bpws:from variable="mottaOSKvitteringRequest">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtaksId]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="positivOSKvitteringMottattRequest">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[vedtaksId]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="KallPositivOppdragsmeldingMottatt" operation="positivOSKvitteringMottatt" partnerLink="IverksettVedtakPartner" portType="ns9:IverksettVedtakTest" wpc:continueOnError="no" wpc:displayName="Kall PositivOppdragsmeldingMottatt" wpc:id="765">
                    <wpc:input>
                      <wpc:parameter name="positivOSKvitteringMottattRequest" variable="positivOSKvitteringMottattRequest"/>
                    </wpc:input>
                  </bpws:invoke>
                </bpws:sequence>
              </bpws:onEvent>
            </bpws:eventHandlers>
            <bpws:receive name="Ventpaapositivoppdragsmelding" operation="positivOSKvitteringMottatt" partnerLink="IverksettVedtak" portType="ns9:IverksettVedtakTest" wpc:displayName="Vent paa positiv oppdragsmelding" wpc:id="755">
              <wpc:output>
                <wpc:parameter name="positivOSKvitteringMottattRequest" variable="positivOSKvitteringMottattRequest"/>
              </wpc:output>
              <bpws:correlations>
                <bpws:correlation initiate="no" set="SamordningCorrelationSet"/>
              </bpws:correlations>
            </bpws:receive>
          </bpws:scope>
        </bpws:sequence>
      </bpws:case>
      <bpws:otherwise>
        <bpws:empty name="Ingenhandling1" wpc:displayName="Ingen handling" wpc:id="769"/>
      </bpws:otherwise>
    </bpws:switch>
  </bpws:sequence>
</bpws:process>
