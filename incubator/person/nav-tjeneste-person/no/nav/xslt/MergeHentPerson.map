<?xml version="1.0" encoding="UTF-8"?><mappingRoot domainID="com.ibm.msl.mapping.xml" targetNamespace="http://nav-tjeneste-person/xslt/MergeHentPerson" version="7.0.300" xmlns="http://www.ibm.com/2008/ccl/Mapping" xmlns:map="http://nav-tjeneste-person/xslt/MergeHentPerson">
    <input path="smo://smo/name%3Dwsdl-primary/sharedContext%3D%257Bhttp%253A%252F%252Fnav-tjeneste-person%252Fno%252Fnav%252Fasbo%257DTPSPersonSharedContext/message%3D%257Bhttp%253A%252F%252Fnav-lib-frg-tps%252Fno%252Fnav%252Flib%252Ffrg%252Finf%257DhentTPSDataResponseMsg/xpath%3D%252F/smo.xsd"/>
    <output path="smo://smo/name%3Dwsdl-primary/sharedContext%3D%257Bhttp%253A%252F%252Fnav-tjeneste-person%252Fno%252Fnav%252Fasbo%257DTPSPersonSharedContext/message%3D%257Bhttp%253A%252F%252Fnav.no%252Fvirksomhet%252Ftjenester%252Fperson%252Fv1%257DhentPersonResponse/xpath%3D%252F/smo.xsd"/>
    <imports>
        <import kind="java" location="no.nav.java.DateUtilities" namespace="xalan://no.nav.java.DateUtilities"/>
    </imports>
    <namespaces>
        <namespace kind="extension" prefix="DU" uri="xalan://no.nav.java.DateUtilities"/>
    </namespaces>
    <mappingDeclaration name="MergeHentPerson">
        <input path="smo"/>
        <output path="smo"/>
        <local>
            <input path="context"/>
            <output path="body"/>
            <local>
                <input path="shared"/>
                <output path="hentPersonResponse"/>
                <move>
                    <input path="person/fnr"/>
                    <output path="response/person/personIdent/ident"/>
                </move>
                <move>
                    <input path="person/fnrTidspunkt" var="fnrTidspunkt"/>
                    <output path="response/person/personIdent/sporing/endretInfo/dato"/>
                    <test lang="XPath">$fnrTidspunkt &gt; '0'</test>
                </move>
                <move>
                    <input path="person/fnrSystem"/>
                    <output path="response/person/personIdent/sporing/endretInfo/kildeNavn"/>
                </move>
                <move>
                    <input path="person/fnrSaksbehandler"/>
                    <output path="response/person/personIdent/sporing/endretInfo/ident"/>
                </move>
                <local>
                    <input path="person/navn"/>
                    <output path="response/person/navn"/>
                    <move>
                        <input path="kortnavn"/>
                        <output path="kortnavn"/>
                    </move>
                    <move>
                        <input path="fornavn"/>
                        <output path="fornavn"/>
                    </move>
                    <move>
                        <input path="mellomnavn"/>
                        <output path="mellomnavn"/>
                    </move>
                    <move>
                        <input path="etternavn"/>
                        <output path="etternavn"/>
                    </move>
                    <move>
                        <input path="navnTidspunkt"/>
                        <output path="sporing/endretInfo/dato"/>
                    </move>
                    <move>
                        <input path="navnSystem"/>
                        <output path="sporing/endretInfo/kildeNavn"/>
                    </move>
                    <move>
                        <input path="navnSaksbehandler"/>
                        <output path="sporing/endretInfo/ident"/>
                    </move>
                </local>
                <move>
                    <input path="person/spesregType"/>
                    <output path="response/person/diskresjonskode/kode"/>
                </move>
                <move>
                    <input path="person/datoDo" var="datoDo"/>
                    <output path="response/person/dodsfall/dodsdato"/>
                    <test lang="XPath">$datoDo &gt; '0'</test>
                </move>
                <move>
                    <input path="person/doTidspunkt" var="doTidspunkt"/>
                    <output path="response/person/dodsfall/sporing/endretInfo/dato"/>
                    <test lang="XPath">$doTidspunkt &gt; '0'</test>
                </move>
                <move>
                    <input path="person/doSystem" var="doSystem"/>
                    <output path="response/person/dodsfall/sporing/endretInfo/kildeNavn"/>
                </move>
                <move>
                    <input path="person/doSaksbehandler" var="doSaksbehandler"/>
                    <output path="response/person/dodsfall/sporing/endretInfo/ident"/>
                </move>
                <customFunction lang="java" ref="DU:parseTpsDateToWIDString">
                    <input path="person/datoUmyndiggjort" var="datoUmyndiggjort"/>
                    <output path="response/person/umyndiggjortDato"/>
                    <param name="input" value="$datoUmyndiggjort"/>
                </customFunction>
                <move>
                    <input path="person/kodeInnvandretFra" var="kodeInnvandretFra"/>
                    <output path="response/person/innvandring/innvandretFraLand/kode"/>
                </move>
                <move>
                    <input path="person/innvandretFra" var="innvandretFra"/>
                    <output path="response/person/innvandring/innvandretFraLand/navn"/>
                </move>
                <customFunction lang="java" ref="DU:parseTpsDateToWIDString">
                    <input path="person/datoInnvandret" var="datoInnvandret"/>
                    <output path="response/person/innvandring/innvandretDato"/>
                    <param name="input" value="$datoInnvandret"/>
                </customFunction>
                <move>
                    <input path="person/utvandretTil" var="utvandretTil"/>
                    <output path="response/person/utvandring/utvandretTilLand/navn"/>
                </move>
                <move>
                    <input path="person/kodeUtvandretTil" var="kodeUtvandretTil"/>
                    <output path="response/person/utvandring/utvandretTilLand/kode"/>
                </move>
                <move>
                    <input path="person/datoUtvandret" var="datoUtvandret"/>
                    <output path="response/person/utvandring/utvandretDato"/>
                    <test lang="XPath">$datoUtvandret &gt; '0'</test>
                </move>
                <local>
                    <input path="person/statsborgerskap" var="statsborgerskap"/>
                    <output path="response/person/statsborgerskap"/>
                    <move>
                        <input path="$statsborgerskap/kodeStatsborger" var="kodeStatsborger"/>
                        <output path="statsborgerskap/kode"/>
                    </move>
                    <move>
                        <input path="$statsborgerskap/statsborger" var="statsborger"/>
                        <output path="statsborgerskap/navn"/>
                    </move>
                    <move>
                        <input path="$statsborgerskap/datoStatsborger" var="datoStatsborger"/>
                        <output path="gjelderFom"/>
                        <test lang="XPath">$datoStatsborger &gt; '0'</test>
                    </move>
                    <move>
                        <input path="$statsborgerskap/statsbTidspunkt" var="statsbTidspunkt"/>
                        <output path="sporing/endretInfo/dato"/>
                        <test lang="XPath">$statsbTidspunkt &gt; '0'</test>
                    </move>
                    <move>
                        <input path="$statsborgerskap/statsbSystem" var="statsbSystem"/>
                        <output path="sporing/endretInfo/kildeNavn"/>
                    </move>
                    <move>
                        <input path="$statsborgerskap/statsbSaksbehandler" var="statsbSaksbehandler"/>
                        <output path="sporing/endretInfo/ident"/>
                    </move>
                </local>
                <move>
                    <input path="person/kodePersonStatus" var="kodePersonStatus"/>
                    <output path="response/person/personstatus/kode"/>
                </move>
                <move>
                    <input path="person/personStatus" var="personStatus"/>
                    <output path="response/person/personstatus/dekode"/>
                </move>
                <local>
                    <input path="person/sivilstandsInfo" var="sivilstandsInfo"/>
                    <output path="response/person/sivilstand"/>
                    <move>
                        <input path="$sivilstandsInfo/kodeSivilstand" var="kodeSivilstand"/>
                        <output path="sivilstand/kode"/>
                    </move>
                    <move>
                        <input path="$sivilstandsInfo/sivilstand" var="sivilstand"/>
                        <output path="sivilstand/dekode"/>
                    </move>
                    <move>
                        <input path="$sivilstandsInfo/datoSivilstand" var="datoSivilstand"/>
                        <output path="gjelderFom"/>
                        <test lang="XPath">$datoSivilstand &gt; '0'</test>
                    </move>
                    <move>
                        <input path="$sivilstandsInfo/sivilstTidspunkt" var="sivilstTidspunkt"/>
                        <output path="sporing/endretInfo/dato"/>
                        <test lang="XPath">$sivilstTidspunkt &gt; '0'</test>
                    </move>
                    <move>
                        <input path="$sivilstandsInfo/sivilstSystem" var="sivilstSystem"/>
                        <output path="sporing/endretInfo/kildeNavn"/>
                    </move>
                    <move>
                        <input path="$sivilstandsInfo/sivilstSaksbehandler" var="sivilstSaksbehandler"/>
                        <output path="sporing/endretInfo/ident"/>
                    </move>
                </local>
                <move>
                    <input path="person/kodeFodeland" var="kodeFodeland"/>
                    <output path="response/person/fodeland/kode"/>
                </move>
                <move>
                    <input path="person/fodeLand" var="fodeLand"/>
                    <output path="response/person/fodeland/navn"/>
                </move>
                <move>
                    <input path="personUtland/oppholdstillatelseType" var="oppholdstillatelseType"/>
                    <output path="response/person/oppholdstillatelse/oppholdstillatelse/kode"/>
                </move>
                <move>
                    <input path="personUtland/beskrOppholdType" var="beskrOppholdType"/>
                    <output path="response/person/oppholdstillatelse/oppholdstillatelse/dekode"/>
                </move>
                <move>
                    <input path="personUtland/oppholdstillatelseFom" var="oppholdstillatelseFom"/>
                    <output path="response/person/oppholdstillatelse/gjelderFom"/>
                    <test lang="XPath">$oppholdstillatelseFom &gt; '0'</test>
                </move>
                <move>
                    <input path="personUtland/oppholdstillatelseTom" var="oppholdstillatelseTom"/>
                    <output path="response/person/oppholdstillatelse/gjelderTom"/>
                    <test lang="XPath">$oppholdstillatelseTom &gt; '0'</test>
                </move>
                <move>
                    <input path="personUtland/arbeidstillatelseType" var="arbeidstillatelseType"/>
                    <output path="response/person/arbeidstillatelse/arbeidstillatelse/kode"/>
                </move>
                <move>
                    <input path="personUtland/beskrArbeidstillType" var="beskrArbeidstillType"/>
                    <output path="response/person/arbeidstillatelse/arbeidstillatelse/dekode"/>
                </move>
                <move>
                    <input path="personUtland/arbeidstillatelseFom" var="arbeidstillatelseFom"/>
                    <output path="response/person/arbeidstillatelse/gjelderFom"/>
                    <test lang="XPath">$arbeidstillatelseFom &gt; '0'</test>
                </move>
                <move>
                    <input path="personUtland/arbeidstillatelseTom" var="arbeidstillatelseTom"/>
                    <output path="response/person/arbeidstillatelse/gjelderTom"/>
                    <test lang="XPath">$arbeidstillatelseTom &gt; '0'</test>
                </move>
            </local>
        </local>
    </mappingDeclaration>
</mappingRoot>