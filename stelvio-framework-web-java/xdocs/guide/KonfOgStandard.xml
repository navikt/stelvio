<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Konfigurasjon og Navnestandard - Guide</title>
	</properties>
	<body>
		<section name="Konfigurasjon">
			<p>
				Beskrivelse av de viktigste konfigurasjonsfilene i presentasjonslaget.
			</p>
			
			<subsection name="web.xml">
				<h4>Oversikt</h4>
					<p>
						Konfigurasjonsfil for webkontaineren. Her ligger det diverse informasjon om servleten som skal kjøres
						samt informasjon om de taglibs som brukes.
					</p>

			</subsection>

			<subsection name="struts-config.xml">
			
				<h4>Oversikt</h4>
					<p>
						Konfigurasjonsfil som Struts servlet leser ved oppstart. Her ligger beskrivelse av de elementer som servleten
						trenger under kjøring. Det er globale exceptions, globale forward, action mapping, konfigurasjon av kontroller,
						message resources samt plug-in konfigurasjon.
						<br/>
					</p>

			</subsection>
			
			<subsection name="validation.xml">
				<p>
					<h4>Oversikt</h4>
						Konfigurasjonsfil for validering av FormBeans. Regler for validering knyttes til felter i formen
						i denne filen. Det kan også lages globale konstanter til regler.
	
					<h4>Eksempel</h4>
						Første feltet er et obligatorisk datofelt.
						
<source>
<![CDATA[
<formset>
    <form name="firstForm">
    	<field
            property="name1String"
            depends="required,date">
               	<arg0 key="prompt.name1String"/>
               	<var>
               		<var-name>date-pattern</var-name>
               		<var-value>dd.mm.yyyy</var-value>
               	</var>
        </field>
	<field
	    property="name2String"
	    depends="required,mask,minLength">
	    <msg name="mask" key="firstForm.name2String.maskmsg"/>
	    <msg name="minlength" key="firstForm.name2String.minlengthmsg"/>
	    <arg0 key="prompt.name2String"/>
	    <var>
		<var-name>mask</var-name>
		<var-value>^[0-9a-zA-Z|æ|ø|å|Æ|Ø|Å]*$</var-value>
	    </var>
	    <var>
		<var-name>minLength</var-name>
		<var-value>4</var-value>
	    </var>
	</field>         	
    </form>
</formset>

]]></source>
				</p>
			</subsection>			

			<subsection name="validation-rules.xml">
				<h4>Oversikt</h4>
					<p>
						Konfigurasjonsfil for valideringsregler av FormBean. Her ligger reglene som brukes i validation.xml.
					</p>
			</subsection>			
			
			<subsection name="application.properties">
				<p>
					<h4>Oversikt</h4>
						Konfigurasjonsfil for <i>messages</i> i applikasjonen. Dvs i denne filen ligger teksten
						som vises i web klienten ved bruk av attributtet <i>key</i> i JSP siden. Bl.a. tekstbeskrivelser
						av felter og feilmeldinger. (Feilmeldinger som kommer fra underliggende lag henter meldingen fra
						arkitekturen)

					<h4>Eksempel</h4>
						Tekster som vises i et vindu defineres under en modul. Felter gjenbrukes ikke i flere moduler pga.
						at endring kan gi store konsekvenser.
						
<source>
# -------------
# -- Moduler --
# -------------
# -- Oppgaveliste --
prompt.name1=Name 1
prompt.name2=Name 2
# -- Knapper --
button.next=Neste
button.previous=Forrige
button.firstpage=Første side
# ----------------
# -- Validering --
# ----------------
firstForm.name2.maskmsg={0} må være bokstaver eller sifrer, ikke mellomrom
firstForm.name2.minlengthmsg={0} må ha minimum 5 tegn
errors.range={0} er ikke i området mellom {1} og {2}.
</source>
				</p>
			</subsection>
		</section>

		<section name="Standarder">
			<subsection name="Formateringsstandarder">
				<p>
					Det er viktig med standard formateringsregler i en applikasjon. Det er behov for 
					formateringsregler for forskjellige typer av felter. Formateringen av feltene er beskrevet i GUI-standarden.
				</p>
			</subsection>

			<subsection name="Navnestandarder i presentasjonslaget">
				<p>
					Navn som skal brukes i koding av moduler i presentasjonslaget.
					<br/>
					Der norske navn brukes skal ikke norske tegn brukes. Ingen norske tegn noen plass i koden eller i filnavn!!
					<br/>
					<table>
						<tr>
							<th>Type tjeneste</th>
							<th>Beskrivelse av navnestandard</th>
						</tr>
						<tr>
							<td>Form</td>
							<td>Navnet på Formen skal være det samme som navnet på modulen + Form. Eks: OFS020SakForm</td>
						</tr>
						<tr>
							<td>Actionklasse</td>
							<td>Navnet på klassen skal være det samme som navnet på modulen + Action. Eks: OFS020SakAction</td>
						</tr>
						<tr>
							<td>JSP</td>
							<td>Navnet på JSP skal være det samme som navnet på modulen. Eks OFS020Sak.jsp</td>
						</tr>
						<tr>
							<td>Metode i Actionklassen</td>
							<td>Prefiks skal være 'execute' og så navnet på tjenesten beskrevet i moduldesignet</td>
						</tr>
						<tr>
							<td>'Deler' i tiles</td>
							<td>Delene skal ha samme navn som de moduler de representerer.</td>
						</tr>
						<tr>
							<td>Konfigurasjonsfiler</td>
							<td>Norsk brukes gjennomgående i filene siden dette er mer knyttet til applikasjonen og ikke til arkitekturen</td>
						</tr>
					</table>
				</p>
			</subsection>

			<subsection name = "Endringslogg">
<source><![CDATA[
$Log$
Revision 1.3  2004/06/18 13:10:20  jla2920
Oppdatert etter review og satt inn ny endringslogg
]]>			
</source>
			</subsection>

		</section>
	</body>
</document>

