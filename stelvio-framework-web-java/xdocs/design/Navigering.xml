<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Navigation - Design</title>
	</properties>
	<body>
		<section name="Navigasjon - Design">
			
			<subsection name="Oversikt">
			
				<p>
					I rammeverket Struts utføres navigeringen i de enkelte Actionklassene. Når en metode i Action er klar
					returneres en ActionForward til RequestProcessorn. Denne forwarden forteller hvor man skal videre.
					Forwarden er definert i Struts konfigurasjonsfil. 
					<br/>
					Det skal være mulig å returnere til en side der brukeren har registrert verdier og som viser verdiene uten
					at brukeren må legge inn verdiene på nytt. F.eks. i et
					registreringsvindu så skal det være mulig å legge inn noe data, gå til et søkevindu som returnerer data
					til registreringsvindu. I registreringsvinduet skal da de opprinnelige verdiene samt retur fra søkevindu
					vises. Dette betyr at en Form skal kunne lagres i sessionen og kunne hentes frem ved retur. Det skal
					også være lov å ha flere vinduer åpne samtidlig slik at det må finnes logikk for å kunne skille vinduene
					fra hverandre. (Et vindu skal ikke kunne hente inn det andre vinduets form) 
					<br/>
					Det skal også være mulig å kunne navigere tilbake til forrige vindu som var besøkt. Historikken må altså
					lagres sammen med formen. I en slik vindus rekke skal det også være mulig å navigere tilbake til starten
					av rekken og se verdiene som er registrert der.
				</p>
			
			</subsection>
			
			<subsection name="Beskrivelse av tjenester">
				<p>
					<h4>ReturnUtils</h4>
						Denne klassen er ansvarlig for å lagre og hente frem returinformasjon. Returinformasjon består av formen
						som er lagret, en retursti som brukes for å nå tilbake til riktig Action og feltet der returverdien skal
						plasseres.
						<br/>
						Formen skal kunne hentes ut med	angitt retursti. Returstien som sist ble lagret skal kunne hentes. Feltet
						der returinformasjonen skal sendes til skal også kunne hentes. Samt at returinformasjonen må kunne slettes.
						<br/>
					<h4>RequestUtils</h4>
						Her legges en funksjonalitet som tilsvarer ActionMapping sin findForward. Forward skal finnes men
						returinformasjon skal også kunne lagres. Det skal også være mulig å skille på om en forward går til en
						annen action eller en tiles og på den måten overstyre hvilken metode som skal brukes. Lasting av vindu
						skal skje når en ny action kalles.
						<br/>
						Det skal også finnes funksjonalitet for at lagre informasjon i sessionskonteksten som applikasjonen kan bruke.
						Det er laget design for klientkonteksten i prosjektet <a href="../../nav-framework-common-java/index.html">nav-framework-common-java</a>
					<h4>FindDispatchAction</h4>
						Hvis en bruker klikker på en knapp/link to ganger for resultatet fra første klikk vises i vinduet blir
						det problem at fullføre requesten på serveren. Det må legges til funksjonalitet som forhindrer dette med
						at sette en token som sjekkes ved hver ny request. Denne funksjonaliteten bør kunne legges i en metode
						til denne abstrakte klassen som utvikleren må utvide.
				</p>
			</subsection>

			<subsection name="Sekvensdiagram">
			
				<p>
					Diagrammet viser hvordan en forespørsel blir sendt gjennom arkitekturen. 
				</p>
			
				<img src="../images/design/ActionSequence.gif"/>
			
			</subsection>
			
			<subsection name="Implementasjon">
				<p>
					Se javadoc for beskrivelse av klasser og metoder.
					<br/>
					Klassene implementeres i pakken no.stelvio.web.framework.action
                    <br/>
				</p>
			</subsection>

			<subsection name = "Endringslogg">
<source><![CDATA[
$Log$
Revision 1.5  2004/06/18 13:10:21  jla2920
Oppdatert etter review og satt inn ny endringslogg
]]>			
</source>
			</subsection>

			
		</section>
	</body>
</document>

