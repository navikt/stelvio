<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Transaksjonskontekst - Guide</title>
	</properties>
	<body>
		<section name="Transaksjonskontekst - Guide">

			<subsection name="Oversikt">

				<p>
					Transaksjonskontekst er en beholder som benyttes for å oppbevare data som må være 
					tilgjengelig over flere arkitekturlag.
				</p>
				<p>
					Et <i>Intercepting Filter</i> benyttes for å initialisere og rydde opp i konteksten
					henholdsvis før og etter prosessering. Konteksten eksporteres til brukerens sesjon 
					etter prosessering, slik at den igjen kan importeres før neste prosessering.
				</p>
				<p>
					Transaksjonskonteksten sendes mellom to arkitekturlag som en del av et <i>Transfer Object</i>.
					I presentasjonslaget er det en <i>Business Delegate</i> som eksporterer konteksten slik at den
					kan sendes med hver <i>ServiceRequest</i> til forretningslaget. På forretningslaget importerer en
					<i>Business Facade</i> konteksten fra hver <i>ServiceRequest</i> før kontrollen delegeres 
					til forretningstjenestene. Transaksjonskonteksten sendes tilbake med hver <i>ServiceResponse</i>.
				</p>
			</subsection>
			
			<subsection name="Hvordan oppdatere og lese fra konteksten">
			
			<p>
				Data lagres i og leses fra konteksten ved å kalle de spesifikke statiske metodene 
				definert i klassen TransactionContext som vist i kodeeksempelet nedenfor.
			</p>
			
<source><![CDATA[
...
// Hent ut pålogget brukers ident
String userId = TransactionContext.getUserId();
...
]]>			
</source>

<source><![CDATA[
...
// Sett pålogget brukers ident
TransactionContext.setUserId(userId);
...
]]>			
</source>				

			</subsection>
			
			<subsection name="Hvordan utvide konteksten">
			
			<p>
				Konteksten utvides ved å legge til nye spesifikke statiske metoder i klassen TransactionContext.
				Dette skal kun utføres av arkitekturteamet for å unngå at applikasjonsspesifikk informasjon 
				lagres i konteksten istedenfor i domeneobjekter og transferobjekter.
			</p>
			</subsection>

			<subsection name = "Endringslogg">
<source><![CDATA[
$Log$
Revision 1.2  2004/06/18 13:24:22  psa2920
endret eksempelkoden

Revision 1.1  2004/06/16 15:45:34  psa2920
Beskrevet bruk og utvidelse av konteksten
]]>			
</source>
			</subsection>
			
		</section>
	</body>
</document>

